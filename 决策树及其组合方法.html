<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 决策树及其组合方法 | 数据科学导论（Introductory of Data Science）</title>
  <meta name="description" content="2022年数据科学导论" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 决策树及其组合方法 | 数据科学导论（Introductory of Data Science）" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="2022年数据科学导论" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 决策树及其组合方法 | 数据科学导论（Introductory of Data Science）" />
  
  <meta name="twitter:description" content="2022年数据科学导论" />
  

<meta name="author" content="潘蓄林" />


<meta name="date" content="2022-06-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="logistic回归.html"/>
<link rel="next" href="github使用.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">数据科学导论(Introductory of Data Science)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 前言（Prerequisites）<span></span></a></li>
<li class="chapter" data-level="2" data-path="r及python语言简介.html"><a href="r及python语言简介.html"><i class="fa fa-check"></i><b>2</b> R及Python语言简介<span></span></a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="r及python语言简介.html"><a href="r及python语言简介.html#r简介"><i class="fa fa-check"></i><b>2.0.1</b> R简介<span></span></a></li>
<li class="chapter" data-level="2.0.2" data-path="r及python语言简介.html"><a href="r及python语言简介.html#r语言安装及环境配置"><i class="fa fa-check"></i><b>2.0.2</b> R语言安装及环境配置<span></span></a></li>
<li class="chapter" data-level="2.0.3" data-path="r及python语言简介.html"><a href="r及python语言简介.html#rstudio软件安装"><i class="fa fa-check"></i><b>2.0.3</b> Rstudio软件安装<span></span></a></li>
<li class="chapter" data-level="2.0.4" data-path="r及python语言简介.html"><a href="r及python语言简介.html#r基础"><i class="fa fa-check"></i><b>2.0.4</b> R基础<span></span></a></li>
<li class="chapter" data-level="2.0.5" data-path="r及python语言简介.html"><a href="r及python语言简介.html#python语言安装及环境配置"><i class="fa fa-check"></i><b>2.0.5</b> python语言安装及环境配置<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="数据描述.html"><a href="数据描述.html"><i class="fa fa-check"></i><b>3</b> 数据描述<span></span></a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="数据描述.html"><a href="数据描述.html#数据的意义及获取"><i class="fa fa-check"></i><b>3.0.1</b> 数据的意义及获取<span></span></a></li>
<li class="chapter" data-level="3.0.2" data-path="数据描述.html"><a href="数据描述.html#简单的数据汇总"><i class="fa fa-check"></i><b>3.0.2</b> 简单的数据汇总<span></span></a></li>
<li class="chapter" data-level="3.0.3" data-path="数据描述.html"><a href="数据描述.html#数据的可视化"><i class="fa fa-check"></i><b>3.0.3</b> 数据的可视化<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="数据整理和清理.html"><a href="数据整理和清理.html"><i class="fa fa-check"></i><b>4</b> 数据整理和清理<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="数据整理和清理.html"><a href="数据整理和清理.html#数据的筛选"><i class="fa fa-check"></i><b>4.1</b> 数据的筛选<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="数据整理和清理.html"><a href="数据整理和清理.html#数据合并"><i class="fa fa-check"></i><b>4.2</b> 数据合并<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="数据整理和清理.html"><a href="数据整理和清理.html#数据的缺失"><i class="fa fa-check"></i><b>4.3</b> 数据的缺失<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="数据整理和清理.html"><a href="数据整理和清理.html#缺失值的审视与标记"><i class="fa fa-check"></i><b>4.3.1</b> 缺失值的审视与标记<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="数据整理和清理.html"><a href="数据整理和清理.html#删除缺失值的方法及问题"><i class="fa fa-check"></i><b>4.3.2</b> 删除缺失值的方法及问题<span></span></a></li>
<li class="chapter" data-level="4.3.3" data-path="数据整理和清理.html"><a href="数据整理和清理.html#利用可预测模型来填补缺失值"><i class="fa fa-check"></i><b>4.3.3</b> 利用可预测模型来填补缺失值<span></span></a></li>
<li class="chapter" data-level="4.3.4" data-path="数据整理和清理.html"><a href="数据整理和清理.html#处理缺失值的r包"><i class="fa fa-check"></i><b>4.3.4</b> 处理缺失值的R包<span></span></a></li>
<li class="chapter" data-level="4.3.5" data-path="数据整理和清理.html"><a href="数据整理和清理.html#实例"><i class="fa fa-check"></i><b>4.3.5</b> 实例<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="有监督学习概论.html"><a href="有监督学习概论.html"><i class="fa fa-check"></i><b>5</b> 有监督学习概论<span></span></a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="有监督学习概论.html"><a href="有监督学习概论.html#机器学习"><i class="fa fa-check"></i><b>5.0.1</b> 机器学习<span></span></a></li>
<li class="chapter" data-level="5.0.2" data-path="有监督学习概论.html"><a href="有监督学习概论.html#机器学习实例"><i class="fa fa-check"></i><b>5.0.2</b> 机器学习实例<span></span></a></li>
<li class="chapter" data-level="5.1" data-path="有监督学习概论.html"><a href="有监督学习概论.html#模型及拟合"><i class="fa fa-check"></i><b>5.1</b> 模型及拟合<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="有监督学习概论.html"><a href="有监督学习概论.html#训练最小二乘线性回归模型的例子"><i class="fa fa-check"></i><b>5.2</b> 训练最小二乘线性回归模型的例子<span></span></a></li>
<li class="chapter" data-level="5.3" data-path="有监督学习概论.html"><a href="有监督学习概论.html#模型评价"><i class="fa fa-check"></i><b>5.3</b> 模型评价<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="有监督学习概论.html"><a href="有监督学习概论.html#exercise"><i class="fa fa-check"></i><b>5.4</b> Exercise<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html"><i class="fa fa-check"></i><b>6</b> 最小二乘线性回归法<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#相关概念"><i class="fa fa-check"></i><b>6.1</b> 相关概念<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#线性模型"><i class="fa fa-check"></i><b>6.2</b> 线性模型<span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#模型的估计"><i class="fa fa-check"></i><b>6.2.1</b> 模型的估计<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#简单线性模型simple-linear-modelslm"><i class="fa fa-check"></i><b>6.2.2</b> 简单线性模型(Simple Linear Model,SLM)<span></span></a></li>
<li class="chapter" data-level="6.2.3" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#多元线性回归multiple-linear-modelmlm"><i class="fa fa-check"></i><b>6.2.3</b> 多元线性回归(Multiple Linear Model,mlm)<span></span></a></li>
<li class="chapter" data-level="6.2.4" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#回归实例"><i class="fa fa-check"></i><b>6.2.4</b> 回归实例<span></span></a></li>
<li class="chapter" data-level="6.2.5" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#练习"><i class="fa fa-check"></i><b>6.2.5</b> 练习<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="logistic回归.html"><a href="logistic回归.html"><i class="fa fa-check"></i><b>7</b> Logistic回归<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="logistic回归.html"><a href="logistic回归.html#相关概念-1"><i class="fa fa-check"></i><b>7.1</b> 相关概念<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="logistic回归.html"><a href="logistic回归.html#logistic模型"><i class="fa fa-check"></i><b>7.2</b> Logistic模型<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="logistic回归.html"><a href="logistic回归.html#模型估计"><i class="fa fa-check"></i><b>7.3</b> 模型估计<span></span></a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="logistic回归.html"><a href="logistic回归.html#损失函数loss-function"><i class="fa fa-check"></i><b>7.3.1</b> 损失函数(Loss function)<span></span></a></li>
<li class="chapter" data-level="7.3.2" data-path="logistic回归.html"><a href="logistic回归.html#代价函数cost-funtion"><i class="fa fa-check"></i><b>7.3.2</b> 代价函数(Cost funtion)<span></span></a></li>
<li class="chapter" data-level="7.3.3" data-path="logistic回归.html"><a href="logistic回归.html#模型估计estimation"><i class="fa fa-check"></i><b>7.3.3</b> 模型估计(estimation)<span></span></a></li>
<li class="chapter" data-level="7.3.4" data-path="logistic回归.html"><a href="logistic回归.html#模拟数据模型"><i class="fa fa-check"></i><b>7.3.4</b> 模拟数据模型<span></span></a></li>
<li class="chapter" data-level="7.3.5" data-path="logistic回归.html"><a href="logistic回归.html#logistic回归实例模型"><i class="fa fa-check"></i><b>7.3.5</b> Logistic回归实例模型<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="决策树及其组合方法.html"><a href="决策树及其组合方法.html"><i class="fa fa-check"></i><b>8</b> 决策树及其组合方法<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="决策树及其组合方法.html"><a href="决策树及其组合方法.html#决策树"><i class="fa fa-check"></i><b>8.1</b> 决策树<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="决策树及其组合方法.html"><a href="决策树及其组合方法.html#实例-1"><i class="fa fa-check"></i><b>8.2</b> 实例<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github使用.html"><a href="github使用.html"><i class="fa fa-check"></i><b>9</b> github使用<span></span></a></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">数据科学导论（Introductory of Data Science）</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="决策树及其组合方法" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> 决策树及其组合方法<a href="决策树及其组合方法.html#决策树及其组合方法" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<ul>
<li><p>Decision Tree: A decision tree is a decision support tool that uses a tree-like graph or model of decisions and their possible consequences, including chance event outcomes, resource costs, and utility.</p></li>
<li><p>Decision trees are produced by algorithms that identify various ways of splitting a data set into branch-like segments. These segments form an inverted decision tree that originates with a root node at the top of the tree.</p></li>
</ul>
<div id="决策树" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> 决策树<a href="决策树及其组合方法.html#决策树" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="实例-1" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> 实例<a href="决策树及其组合方法.html#实例-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="决策树及其组合方法.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb1-2"><a href="决策树及其组合方法.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># importing churn data set from .csv file</span></span>
<span id="cb1-3"><a href="决策树及其组合方法.html#cb1-3" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;./data/chun_data.csv&quot;</span>,<span class="at">header=</span> <span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span>
<span id="cb1-4"><a href="决策树及其组合方法.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="决策树及其组合方法.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#as the first three columns of the data arent important for the prediction we drop those columns from the data frame </span></span>
<span id="cb1-6"><a href="决策树及其组合方法.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># drop the variables from the data set</span></span>
<span id="cb1-7"><a href="决策树及其组合方法.html#cb1-7" aria-hidden="true" tabindex="-1"></a>data1<span class="ot">&lt;-</span>data1[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)]</span>
<span id="cb1-8"><a href="决策树及其组合方法.html#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="决策树及其组合方法.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#data exploration</span></span>
<span id="cb1-10"><a href="决策树及其组合方法.html#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="决策树及其组合方法.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#gives the dimensions of the data set</span></span>
<span id="cb1-12"><a href="决策树及其组合方法.html#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data1)</span></code></pre></div>
<pre><code>## [1] 5000   17</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="决策树及其组合方法.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gives the names of the variables in the data set</span></span>
<span id="cb3-2"><a href="决策树及其组合方法.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data1)</span></code></pre></div>
<pre><code>##  [1] &quot;international_plan&quot;            &quot;voice_mail_plan&quot;              
##  [3] &quot;number_vmail_messages&quot;         &quot;total_day_minutes&quot;            
##  [5] &quot;total_day_calls&quot;               &quot;total_day_charge&quot;             
##  [7] &quot;total_eve_minutes&quot;             &quot;total_eve_calls&quot;              
##  [9] &quot;total_eve_charge&quot;              &quot;total_night_minutes&quot;          
## [11] &quot;total_night_calls&quot;             &quot;total_night_charge&quot;           
## [13] &quot;total_intl_minutes&quot;            &quot;total_intl_calls&quot;             
## [15] &quot;total_intl_charge&quot;             &quot;number_customer_service_calls&quot;
## [17] &quot;churn&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="决策树及其组合方法.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#displays top 10 observations of the data set</span></span>
<span id="cb5-2"><a href="决策树及其组合方法.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data1)</span></code></pre></div>
<pre><code>##   international_plan voice_mail_plan number_vmail_messages total_day_minutes
## 1                 no             yes                    25             265.1
## 2                 no             yes                    26             161.6
## 3                 no              no                     0             243.4
## 4                yes              no                     0             299.4
## 5                yes              no                     0             166.7
## 6                yes              no                     0             223.4
##   total_day_calls total_day_charge total_eve_minutes total_eve_calls
## 1             110            45.07             197.4              99
## 2             123            27.47             195.5             103
## 3             114            41.38             121.2             110
## 4              71            50.90              61.9              88
## 5             113            28.34             148.3             122
## 6              98            37.98             220.6             101
##   total_eve_charge total_night_minutes total_night_calls total_night_charge
## 1            16.78               244.7                91              11.01
## 2            16.62               254.4               103              11.45
## 3            10.30               162.6               104               7.32
## 4             5.26               196.9                89               8.86
## 5            12.61               186.9               121               8.41
## 6            18.75               203.9               118               9.18
##   total_intl_minutes total_intl_calls total_intl_charge
## 1               10.0                3              2.70
## 2               13.7                3              3.70
## 3               12.2                5              3.29
## 4                6.6                7              1.78
## 5               10.1                3              2.73
## 6                6.3                6              1.70
##   number_customer_service_calls churn
## 1                             1    no
## 2                             1    no
## 3                             0    no
## 4                             2    no
## 5                             3    no
## 6                             0    no</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="决策树及其组合方法.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#displays bottom top 10 observations of the data set</span></span>
<span id="cb7-2"><a href="决策树及其组合方法.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(data1)</span></code></pre></div>
<pre><code>##      international_plan voice_mail_plan number_vmail_messages total_day_minutes
## 4995                 no              no                     0             170.7
## 4996                 no             yes                    40             235.7
## 4997                 no              no                     0             184.2
## 4998                 no              no                     0             140.6
## 4999                 no              no                     0             188.8
## 5000                 no             yes                    34             129.4
##      total_day_calls total_day_charge total_eve_minutes total_eve_calls
## 4995             101            29.02             193.1             126
## 4996             127            40.07             223.0             126
## 4997              90            31.31             256.8              73
## 4998              89            23.90             172.8             128
## 4999              67            32.10             171.7              92
## 5000             102            22.00             267.1             104
##      total_eve_charge total_night_minutes total_night_calls total_night_charge
## 4995            16.41               129.1               104               5.81
## 4996            18.96               297.5               116              13.39
## 4997            21.83               213.6               113               9.61
## 4998            14.69               212.4                97               9.56
## 4999            14.59               224.4                89              10.10
## 5000            22.70               154.8               100               6.97
##      total_intl_minutes total_intl_calls total_intl_charge
## 4995                6.9                7              1.86
## 4996                9.9                5              2.67
## 4997               14.7                2              3.97
## 4998               13.6                4              3.67
## 4999                8.5                6              2.30
## 5000                9.3               16              2.51
##      number_customer_service_calls churn
## 4995                             1    no
## 4996                             2    no
## 4997                             3   yes
## 4998                             1    no
## 4999                             0    no
## 5000                             0    no</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="决策树及其组合方法.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#displays structure of the variables in the data set</span></span>
<span id="cb9-2"><a href="决策树及其组合方法.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5000 obs. of  17 variables:
##  $ international_plan           : chr  &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;yes&quot; ...
##  $ voice_mail_plan              : chr  &quot;yes&quot; &quot;yes&quot; &quot;no&quot; &quot;no&quot; ...
##  $ number_vmail_messages        : int  25 26 0 0 0 0 24 0 0 37 ...
##  $ total_day_minutes            : num  265 162 243 299 167 ...
##  $ total_day_calls              : int  110 123 114 71 113 98 88 79 97 84 ...
##  $ total_day_charge             : num  45.1 27.5 41.4 50.9 28.3 ...
##  $ total_eve_minutes            : num  197.4 195.5 121.2 61.9 148.3 ...
##  $ total_eve_calls              : int  99 103 110 88 122 101 108 94 80 111 ...
##  $ total_eve_charge             : num  16.78 16.62 10.3 5.26 12.61 ...
##  $ total_night_minutes          : num  245 254 163 197 187 ...
##  $ total_night_calls            : int  91 103 104 89 121 118 118 96 90 97 ...
##  $ total_night_charge           : num  11.01 11.45 7.32 8.86 8.41 ...
##  $ total_intl_minutes           : num  10 13.7 12.2 6.6 10.1 6.3 7.5 7.1 8.7 11.2 ...
##  $ total_intl_calls             : int  3 3 5 7 3 6 7 6 4 5 ...
##  $ total_intl_charge            : num  2.7 3.7 3.29 1.78 2.73 1.7 2.03 1.92 2.35 3.02 ...
##  $ number_customer_service_calls: int  1 1 0 2 3 0 3 0 1 0 ...
##  $ churn                        : chr  &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="决策树及其组合方法.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gives the summary of the variables of the data set </span></span>
<span id="cb11-2"><a href="决策树及其组合方法.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data1)</span></code></pre></div>
<pre><code>##  international_plan voice_mail_plan    number_vmail_messages total_day_minutes
##  Length:5000        Length:5000        Min.   : 0.000        Min.   :  0.0    
##  Class :character   Class :character   1st Qu.: 0.000        1st Qu.:143.7    
##  Mode  :character   Mode  :character   Median : 0.000        Median :180.1    
##                                        Mean   : 7.755        Mean   :180.3    
##                                        3rd Qu.:17.000        3rd Qu.:216.2    
##                                        Max.   :52.000        Max.   :351.5    
##  total_day_calls total_day_charge total_eve_minutes total_eve_calls
##  Min.   :  0     Min.   : 0.00    Min.   :  0.0     Min.   :  0.0  
##  1st Qu.: 87     1st Qu.:24.43    1st Qu.:166.4     1st Qu.: 87.0  
##  Median :100     Median :30.62    Median :201.0     Median :100.0  
##  Mean   :100     Mean   :30.65    Mean   :200.6     Mean   :100.2  
##  3rd Qu.:113     3rd Qu.:36.75    3rd Qu.:234.1     3rd Qu.:114.0  
##  Max.   :165     Max.   :59.76    Max.   :363.7     Max.   :170.0  
##  total_eve_charge total_night_minutes total_night_calls total_night_charge
##  Min.   : 0.00    Min.   :  0.0       Min.   :  0.00    Min.   : 0.000    
##  1st Qu.:14.14    1st Qu.:166.9       1st Qu.: 87.00    1st Qu.: 7.510    
##  Median :17.09    Median :200.4       Median :100.00    Median : 9.020    
##  Mean   :17.05    Mean   :200.4       Mean   : 99.92    Mean   : 9.018    
##  3rd Qu.:19.90    3rd Qu.:234.7       3rd Qu.:113.00    3rd Qu.:10.560    
##  Max.   :30.91    Max.   :395.0       Max.   :175.00    Max.   :17.770    
##  total_intl_minutes total_intl_calls total_intl_charge
##  Min.   : 0.00      Min.   : 0.000   Min.   :0.000    
##  1st Qu.: 8.50      1st Qu.: 3.000   1st Qu.:2.300    
##  Median :10.30      Median : 4.000   Median :2.780    
##  Mean   :10.26      Mean   : 4.435   Mean   :2.771    
##  3rd Qu.:12.00      3rd Qu.: 6.000   3rd Qu.:3.240    
##  Max.   :20.00      Max.   :20.000   Max.   :5.400    
##  number_customer_service_calls    churn          
##  Min.   :0.00                  Length:5000       
##  1st Qu.:1.00                  Class :character  
##  Median :1.00                  Mode  :character  
##  Mean   :1.57                                    
##  3rd Qu.:2.00                                    
##  Max.   :9.00</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="决策树及其组合方法.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library for the sample.split function</span></span>
<span id="cb13-2"><a href="决策树及其组合方法.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caTools)</span>
<span id="cb13-3"><a href="决策树及其组合方法.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="决策树及其组合方法.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#splitting the data into training and testing data </span></span>
<span id="cb13-5"><a href="决策树及其组合方法.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sample the input data with 70% for training and 30% for testing</span></span>
<span id="cb13-6"><a href="决策树及其组合方法.html#cb13-6" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>churn <span class="ot">&lt;-</span> <span class="fu">factor</span>(data1<span class="sc">$</span>churn)</span>
<span id="cb13-7"><a href="决策树及其组合方法.html#cb13-7" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample.split</span>(data1<span class="sc">$</span>churn,<span class="at">SplitRatio=</span><span class="fl">0.70</span>)</span>
<span id="cb13-8"><a href="决策树及其组合方法.html#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="决策树及其组合方法.html#cb13-9" aria-hidden="true" tabindex="-1"></a>trainData <span class="ot">&lt;-</span> <span class="fu">subset</span>(data1,sample<span class="sc">==</span><span class="cn">TRUE</span>)</span>
<span id="cb13-10"><a href="决策树及其组合方法.html#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="决策树及其组合方法.html#cb13-11" aria-hidden="true" tabindex="-1"></a>testData <span class="ot">&lt;-</span> <span class="fu">subset</span>(data1,sample<span class="sc">==</span><span class="cn">FALSE</span>)</span>
<span id="cb13-12"><a href="决策树及其组合方法.html#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="决策树及其组合方法.html#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#rpart --- recursive partitioning decision tree</span></span>
<span id="cb13-14"><a href="决策树及其组合方法.html#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb13-15"><a href="决策树及其组合方法.html#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="决策树及其组合方法.html#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">#TO BUILD DECISON TREE BY USING RPART PACKAGE(recursive partitioning decision tree)</span></span>
<span id="cb13-17"><a href="决策树及其组合方法.html#cb13-17" aria-hidden="true" tabindex="-1"></a>churn_model<span class="ot">&lt;-</span> <span class="fu">rpart</span>(churn <span class="sc">~</span> .,<span class="at">data=</span>trainData)</span>
<span id="cb13-18"><a href="决策树及其组合方法.html#cb13-18" aria-hidden="true" tabindex="-1"></a>churn_model</span></code></pre></div>
<pre><code>## n= 3500 
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
##  1) root 3500 495 no (0.85857143 0.14142857)  
##    2) number_customer_service_calls&lt; 3.5 3212 347 no (0.89196762 0.10803238)  
##      4) total_day_minutes&lt; 248.65 2918 204 no (0.93008910 0.06991090)  
##        8) international_plan=no 2652 101 no (0.96191554 0.03808446)  
##         16) total_day_minutes&lt; 221.95 2314  55 no (0.97623163 0.02376837) *
##         17) total_day_minutes&gt;=221.95 338  46 no (0.86390533 0.13609467)  
##           34) total_eve_minutes&lt; 266.9 306  23 no (0.92483660 0.07516340) *
##           35) total_eve_minutes&gt;=266.9 32   9 yes (0.28125000 0.71875000)  
##             70) voice_mail_plan=yes 7   0 no (1.00000000 0.00000000) *
##             71) voice_mail_plan=no 25   2 yes (0.08000000 0.92000000) *
##        9) international_plan=yes 266 103 no (0.61278195 0.38721805)  
##         18) total_intl_calls&gt;=2.5 211  48 no (0.77251185 0.22748815)  
##           36) total_intl_minutes&lt; 13.1 166   3 no (0.98192771 0.01807229) *
##           37) total_intl_minutes&gt;=13.1 45   0 yes (0.00000000 1.00000000) *
##         19) total_intl_calls&lt; 2.5 55   0 yes (0.00000000 1.00000000) *
##      5) total_day_minutes&gt;=248.65 294 143 no (0.51360544 0.48639456)  
##       10) voice_mail_plan=yes 68   5 no (0.92647059 0.07352941) *
##       11) voice_mail_plan=no 226  88 yes (0.38938053 0.61061947)  
##         22) total_eve_minutes&lt; 201.05 111  37 no (0.66666667 0.33333333)  
##           44) total_day_minutes&lt; 277.05 75  10 no (0.86666667 0.13333333) *
##           45) total_day_minutes&gt;=277.05 36   9 yes (0.25000000 0.75000000)  
##             90) total_eve_minutes&lt; 138.25 8   1 no (0.87500000 0.12500000) *
##             91) total_eve_minutes&gt;=138.25 28   2 yes (0.07142857 0.92857143) *
##         23) total_eve_minutes&gt;=201.05 115  14 yes (0.12173913 0.87826087) *
##    3) number_customer_service_calls&gt;=3.5 288 140 yes (0.48611111 0.51388889)  
##      6) total_day_minutes&gt;=162.95 173  46 no (0.73410405 0.26589595)  
##       12) total_day_minutes&lt; 262.7 153  32 no (0.79084967 0.20915033)  
##         24) total_eve_minutes&gt;=135.1 142  24 no (0.83098592 0.16901408) *
##         25) total_eve_minutes&lt; 135.1 11   3 yes (0.27272727 0.72727273) *
##       13) total_day_minutes&gt;=262.7 20   6 yes (0.30000000 0.70000000) *
##      7) total_day_minutes&lt; 162.95 115  13 yes (0.11304348 0.88695652) *</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="决策树及其组合方法.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#to display it in diagram</span></span>
<span id="cb15-2"><a href="决策树及其组合方法.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="决策树及其组合方法.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rattle)</span></code></pre></div>
<pre><code>## Loading required package: tibble</code></pre>
<pre><code>## Loading required package: bitops</code></pre>
<pre><code>## Rattle: A free graphical interface for data science with R.
## Version 5.5.1 Copyright (c) 2006-2021 Togaware Pty Ltd.
## Type &#39;rattle()&#39; to shake, rattle, and roll your data.</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="决策树及其组合方法.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb19-2"><a href="决策树及其组合方法.html#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="决策树及其组合方法.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fancyRpartPlot</span>(churn_model)</span></code></pre></div>
<p><img src="07-decisiontree_files/figure-html/project-1.png" width="672" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="决策树及其组合方法.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#predicting the model data based on the model built from training data set</span></span>
<span id="cb20-2"><a href="决策树及其组合方法.html#cb20-2" aria-hidden="true" tabindex="-1"></a>pred<span class="ot">&lt;-</span> <span class="fu">predict</span>(churn_model,testData,<span class="at">type =</span> <span class="st">&quot;class&quot;</span> )</span>
<span id="cb20-3"><a href="决策树及其组合方法.html#cb20-3" aria-hidden="true" tabindex="-1"></a>pred</span></code></pre></div>
<pre><code>##    6    7    8   10   12   23   28   30   39   54   55   56   60   61   62   65 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
##   66   75   77   80   85   86   87   88   90   91   96  100  104  108  119  131 
##   no   no  yes   no   no   no  yes   no   no   no   no  yes   no   no   no   no 
##  133  135  138  158  163  168  169  171  174  178  183  184  188  189  192  208 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
##  209  210  214  220  227  232  233  234  239  240  244  245  247  250  256  257 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  259  262  267  270  276  278  279  286  287  288  289  292  301  305  309  313 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  316  318  320  323  327  335  337  340  344  346  357  358  364  365  369  372 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  379  388  393  399  400  413  419  420  421  423  424  434  439  444  446  448 
##  yes   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
##  451  452  456  457  459  461  463  466  472  477  478  479  480  482  483  487 
##   no   no  yes   no   no  yes   no  yes   no   no   no   no   no   no   no   no 
##  490  491  492  499  504  507  511  513  515  520  525  533  535  537  538  540 
##   no   no  yes  yes   no   no   no   no   no   no   no   no  yes   no   no   no 
##  544  547  552  565  566  568  569  575  579  580  582  585  589  590  592  597 
##   no  yes   no   no   no   no  yes  yes   no   no   no  yes  yes   no   no   no 
##  599  600  601  604  610  615  628  629  631  634  637  642  645  646  649  661 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
##  662  663  667  669  677  679  680  684  687  688  689  690  694  695  697  701 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
##  706  707  708  709  711  712  715  722  723  729  731  734  737  738  740  742 
##   no   no   no   no   no  yes   no  yes   no   no  yes   no  yes  yes   no   no 
##  744  747  751  754  757  765  768  772  777  778  781  784  785  790  795  797 
##   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no 
##  798  799  802  805  806  808  810  811  814  815  816  819  822  827  833  840 
##  yes   no   no  yes   no   no   no   no   no   no  yes   no   no   no  yes   no 
##  842  844  850  851  852  855  857  859  860  862  864  869  874  879  890  893 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no  yes   no   no 
##  899  903  914  915  917  919  922  930  931  932  935  936  937  940  941  949 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no 
##  957  962  965  969  973  974  976  977  979  984  985  989  990  991  993  994 
##   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no   no 
##  995  997  999 1005 1006 1007 1011 1012 1013 1015 1021 1022 1028 1031 1035 1038 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 1042 1044 1047 1052 1056 1062 1067 1068 1070 1075 1077 1080 1089 1091 1098 1099 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1102 1103 1106 1107 1110 1116 1117 1119 1121 1126 1133 1136 1140 1144 1145 1150 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1153 1159 1160 1161 1162 1164 1166 1167 1168 1171 1173 1174 1179 1180 1181 1182 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1185 1190 1196 1197 1202 1204 1206 1207 1208 1209 1210 1211 1230 1232 1233 1234 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 1236 1238 1239 1245 1250 1251 1253 1256 1262 1264 1265 1269 1275 1276 1279 1280 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no 
## 1294 1298 1299 1300 1303 1304 1310 1311 1316 1320 1321 1329 1330 1332 1337 1339 
##   no   no   no  yes  yes   no   no   no   no   no   no   no   no   no  yes   no 
## 1341 1344 1345 1346 1348 1349 1354 1355 1356 1358 1359 1366 1368 1372 1379 1381 
##   no   no  yes  yes   no   no   no   no   no   no   no   no   no   no   no   no 
## 1385 1387 1392 1397 1401 1404 1405 1407 1409 1410 1412 1417 1424 1425 1426 1428 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1437 1439 1440 1444 1445 1457 1462 1463 1473 1476 1477 1481 1487 1492 1495 1498 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 1499 1501 1507 1509 1510 1514 1516 1518 1521 1524 1530 1533 1534 1538 1539 1542 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes  yes  yes   no 
## 1544 1546 1550 1552 1554 1562 1565 1567 1568 1573 1576 1579 1583 1589 1592 1595 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1596 1598 1601 1604 1607 1608 1609 1611 1614 1615 1617 1624 1625 1627 1631 1632 
##   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no 
## 1642 1648 1652 1653 1656 1659 1661 1669 1676 1680 1692 1693 1694 1701 1702 1703 
##   no   no  yes   no   no   no   no   no   no  yes  yes   no   no   no  yes  yes 
## 1704 1713 1714 1715 1718 1721 1731 1737 1741 1742 1744 1746 1748 1749 1751 1755 
##   no   no  yes   no   no   no   no  yes   no   no  yes   no   no   no   no  yes 
## 1758 1759 1763 1770 1773 1776 1777 1779 1783 1784 1786 1787 1789 1796 1800 1802 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1806 1809 1814 1820 1821 1826 1827 1830 1831 1833 1835 1840 1844 1846 1847 1848 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no  yes   no   no 
## 1853 1857 1861 1864 1866 1867 1872 1877 1878 1880 1882 1889 1890 1895 1899 1901 
##   no   no   no   no  yes   no   no   no   no   no  yes   no   no   no   no   no 
## 1905 1909 1922 1923 1925 1929 1930 1931 1933 1934 1938 1943 1946 1950 1953 1959 
##   no   no   no  yes   no   no   no   no   no  yes   no   no   no   no   no   no 
## 1960 1962 1963 1967 1969 1974 1978 1989 1996 2001 2004 2005 2006 2007 2008 2009 
##   no   no   no   no   no  yes  yes   no   no   no   no   no   no   no   no   no 
## 2010 2014 2015 2021 2022 2023 2026 2030 2032 2035 2038 2039 2041 2042 2046 2048 
##   no   no   no   no   no   no   no  yes  yes   no   no  yes   no   no   no   no 
## 2049 2059 2060 2066 2069 2075 2076 2078 2083 2087 2088 2089 2093 2095 2096 2097 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 2098 2101 2114 2115 2119 2123 2124 2128 2130 2131 2136 2137 2144 2158 2161 2162 
##   no   no  yes   no  yes   no   no   no   no   no   no   no   no   no  yes   no 
## 2164 2165 2169 2172 2175 2178 2180 2183 2185 2186 2191 2195 2198 2207 2208 2211 
##  yes  yes   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
## 2216 2218 2221 2222 2230 2231 2236 2240 2242 2244 2247 2250 2251 2254 2257 2259 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2262 2264 2266 2267 2269 2277 2280 2281 2282 2288 2292 2293 2296 2297 2299 2303 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2315 2318 2322 2326 2327 2330 2333 2337 2340 2343 2349 2354 2357 2363 2366 2368 
##   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no 
## 2370 2372 2373 2377 2378 2379 2381 2385 2387 2388 2395 2399 2411 2414 2417 2426 
##   no   no   no  yes   no   no  yes   no  yes  yes   no   no   no   no   no   no 
## 2428 2430 2432 2435 2436 2440 2444 2445 2452 2454 2459 2467 2473 2477 2479 2480 
##   no   no   no   no   no   no   no  yes  yes   no   no   no   no   no   no  yes 
## 2481 2482 2488 2489 2490 2495 2496 2501 2512 2513 2523 2526 2528 2529 2530 2532 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2542 2547 2548 2553 2554 2559 2566 2567 2569 2578 2584 2586 2591 2592 2598 2599 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 2613 2615 2618 2619 2622 2627 2641 2647 2659 2660 2661 2666 2667 2670 2679 2682 
##   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 2686 2699 2704 2707 2714 2718 2719 2723 2727 2728 2729 2733 2734 2735 2739 2743 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2748 2749 2751 2752 2755 2756 2757 2758 2759 2762 2767 2772 2773 2774 2779 2782 
##  yes   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 2789 2790 2801 2803 2808 2809 2818 2822 2824 2835 2839 2840 2843 2850 2856 2857 
##   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 2861 2862 2863 2866 2873 2879 2885 2886 2890 2891 2895 2898 2899 2903 2909 2911 
##   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no  yes   no 
## 2916 2919 2923 2925 2927 2928 2935 2939 2941 2942 2945 2947 2948 2952 2967 2968 
##   no   no   no  yes  yes   no   no   no   no   no   no   no  yes   no   no   no 
## 2969 2977 2978 2979 2984 2985 2986 2994 2998 3003 3005 3008 3009 3011 3014 3017 
##  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 3018 3020 3022 3030 3035 3039 3042 3043 3046 3047 3049 3050 3052 3054 3055 3056 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 3062 3064 3068 3069 3070 3073 3075 3077 3081 3084 3088 3100 3104 3105 3109 3111 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
## 3117 3119 3124 3126 3128 3131 3135 3138 3148 3152 3153 3154 3157 3160 3161 3167 
##   no   no   no   no  yes   no   no   no  yes   no   no   no   no   no   no   no 
## 3169 3177 3180 3183 3184 3191 3193 3195 3198 3202 3203 3205 3207 3208 3209 3213 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3218 3223 3228 3230 3233 3235 3240 3241 3245 3246 3252 3259 3263 3264 3267 3269 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
## 3280 3282 3283 3291 3296 3297 3301 3305 3306 3307 3310 3312 3314 3316 3325 3327 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3330 3336 3338 3343 3348 3349 3350 3351 3353 3358 3359 3363 3372 3374 3378 3379 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 3381 3389 3390 3391 3393 3396 3397 3401 3403 3404 3414 3417 3419 3432 3435 3438 
##   no   no   no   no   no  yes   no   no   no   no  yes   no   no   no   no   no 
## 3439 3441 3443 3444 3449 3451 3455 3456 3457 3459 3461 3463 3472 3475 3476 3478 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3480 3482 3484 3486 3489 3491 3492 3493 3495 3501 3505 3507 3508 3512 3514 3519 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 3534 3535 3538 3539 3547 3550 3557 3561 3567 3572 3577 3589 3597 3598 3600 3604 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
## 3605 3607 3610 3615 3617 3621 3622 3628 3631 3637 3640 3643 3644 3645 3649 3651 
##   no   no  yes   no  yes   no   no   no  yes   no   no   no   no   no   no   no 
## 3653 3660 3664 3665 3666 3674 3675 3677 3678 3683 3687 3688 3689 3694 3697 3699 
##   no  yes   no   no  yes   no   no   no   no   no  yes   no  yes   no   no   no 
## 3702 3709 3710 3711 3712 3718 3726 3729 3734 3736 3742 3746 3749 3750 3752 3766 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
## 3771 3774 3776 3778 3780 3782 3787 3792 3800 3801 3802 3804 3810 3811 3812 3814 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3819 3822 3825 3829 3833 3835 3836 3837 3839 3841 3846 3849 3851 3852 3854 3860 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 3862 3876 3877 3886 3889 3892 3895 3902 3905 3906 3911 3913 3916 3918 3920 3921 
##   no   no  yes   no   no   no   no  yes   no   no   no   no   no  yes   no   no 
## 3922 3925 3929 3930 3932 3934 3939 3948 3957 3960 3961 3962 3965 3966 3967 3974 
##   no   no   no  yes  yes   no   no   no   no   no   no   no   no   no  yes  yes 
## 3978 3981 3984 3986 3988 3991 3995 3999 4005 4010 4011 4018 4019 4020 4028 4033 
##   no   no   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no 
## 4039 4042 4046 4050 4051 4052 4057 4058 4060 4062 4065 4068 4083 4084 4091 4093 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4099 4100 4102 4103 4111 4114 4116 4118 4122 4123 4124 4126 4130 4131 4140 4142 
##   no   no   no   no  yes   no   no   no  yes   no   no   no   no  yes   no  yes 
## 4145 4146 4156 4159 4171 4177 4178 4179 4183 4186 4193 4196 4198 4206 4209 4211 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4212 4214 4215 4217 4218 4219 4226 4227 4237 4238 4240 4243 4244 4245 4246 4247 
##   no   no   no   no   no  yes  yes   no  yes   no   no   no   no   no   no   no 
## 4248 4253 4254 4265 4266 4271 4275 4280 4286 4290 4294 4295 4296 4307 4311 4312 
##   no   no  yes  yes   no   no   no  yes  yes   no   no   no   no   no   no   no 
## 4313 4314 4317 4318 4320 4328 4329 4331 4333 4335 4344 4345 4346 4350 4355 4361 
##   no   no   no   no   no   no  yes  yes  yes   no   no   no  yes   no   no   no 
## 4365 4366 4367 4368 4376 4377 4378 4379 4381 4383 4384 4388 4395 4399 4403 4404 
##   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 4405 4407 4409 4415 4417 4421 4422 4423 4425 4429 4436 4437 4449 4451 4452 4454 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4455 4457 4460 4461 4462 4465 4468 4469 4471 4472 4474 4477 4478 4480 4481 4483 
##   no   no   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no 
## 4484 4485 4486 4487 4488 4490 4491 4492 4494 4497 4499 4500 4511 4512 4514 4525 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no 
## 4528 4535 4538 4541 4543 4545 4549 4553 4557 4558 4559 4566 4567 4569 4573 4575 
##  yes   no  yes   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 4577 4583 4586 4587 4588 4589 4592 4600 4602 4604 4605 4610 4613 4614 4616 4617 
##  yes   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no 
## 4620 4622 4623 4628 4633 4637 4640 4641 4643 4644 4653 4655 4660 4662 4664 4668 
##   no   no   no   no   no  yes   no  yes   no  yes   no   no   no   no   no   no 
## 4669 4674 4679 4684 4687 4688 4689 4691 4696 4710 4711 4717 4721 4725 4726 4739 
##   no   no   no   no   no  yes   no   no   no   no  yes   no   no   no   no   no 
## 4740 4742 4750 4752 4755 4764 4766 4769 4773 4781 4788 4792 4796 4798 4799 4817 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no 
## 4818 4822 4823 4826 4828 4832 4834 4836 4843 4846 4848 4857 4858 4859 4862 4863 
##  yes   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes  yes 
## 4864 4865 4872 4873 4875 4879 4880 4881 4886 4887 4890 4893 4894 4901 4903 4907 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4912 4916 4921 4922 4925 4931 4934 4935 4938 4940 4943 4944 4948 4949 4951 4953 
##   no   no   no   no  yes   no   no   no  yes  yes   no  yes   no  yes   no   no 
## 4955 4957 4962 4969 4971 4974 4977 4978 4989 4990 4996 4997 
##   no   no   no   no   no   no   no   no   no   no   no   no 
## Levels: no yes</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="决策树及其组合方法.html#cb22-1" aria-hidden="true" tabindex="-1"></a>pred1<span class="ot">&lt;-</span> <span class="fu">data.frame</span>(pred)</span>
<span id="cb22-2"><a href="决策树及其组合方法.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#View(pred1)</span></span>
<span id="cb22-3"><a href="决策树及其组合方法.html#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="决策树及其组合方法.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Confusion matrix is a technique for summarizing the performance of a classification algorithm </span></span>
<span id="cb22-5"><a href="决策树及其组合方法.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(testData<span class="sc">$</span>churn ,pred)<span class="co">#create confusion matrix to see how mnay cus are correctly predicted and incorrectly predicted</span></span></code></pre></div>
<pre><code>##      pred
##         no  yes
##   no  1258   30
##   yes   66  146</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="决策树及其组合方法.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb24-2"><a href="决策树及其组合方法.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="do">#####RANDOM FOREST MODEL</span></span>
<span id="cb24-3"><a href="决策树及其组合方法.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb24-4"><a href="决策树及其组合方法.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="决策树及其组合方法.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="决策树及其组合方法.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span></code></pre></div>
<pre><code>## randomForest 4.7-1.1</code></pre>
<pre><code>## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre><code>## 
## Attaching package: &#39;randomForest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:rattle&#39;:
## 
##     importance</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="决策树及其组合方法.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#to build the random forest model </span></span>
<span id="cb29-2"><a href="决策树及其组合方法.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">#trainData$churn = as.character(trainData$churn)</span></span>
<span id="cb29-3"><a href="决策树及其组合方法.html#cb29-3" aria-hidden="true" tabindex="-1"></a>random_model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(churn<span class="sc">~</span>.,<span class="at">data=</span>trainData, <span class="at">importance =</span> T)</span>
<span id="cb29-4"><a href="决策树及其组合方法.html#cb29-4" aria-hidden="true" tabindex="-1"></a>random_model</span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(formula = churn ~ ., data = trainData, importance = T) 
##                Type of random forest: classification
##                      Number of trees: 500
## No. of variables tried at each split: 4
## 
##         OOB estimate of  error rate: 3.86%
## Confusion matrix:
##       no yes class.error
## no  2986  19 0.006322795
## yes  116 379 0.234343434</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="决策树及其组合方法.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#predicting the data based on the model developed</span></span>
<span id="cb31-2"><a href="决策树及其组合方法.html#cb31-2" aria-hidden="true" tabindex="-1"></a>ran_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(random_model,testData)</span>
<span id="cb31-3"><a href="决策树及其组合方法.html#cb31-3" aria-hidden="true" tabindex="-1"></a>ran_pred</span></code></pre></div>
<pre><code>##    6    7    8   10   12   23   28   30   39   54   55   56   60   61   62   65 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
##   66   75   77   80   85   86   87   88   90   91   96  100  104  108  119  131 
##   no   no  yes   no   no   no  yes   no   no   no   no   no   no   no   no   no 
##  133  135  138  158  163  168  169  171  174  178  183  184  188  189  192  208 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  209  210  214  220  227  232  233  234  239  240  244  245  247  250  256  257 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  259  262  267  270  276  278  279  286  287  288  289  292  301  305  309  313 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  316  318  320  323  327  335  337  340  344  346  357  358  364  365  369  372 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  379  388  393  399  400  413  419  420  421  423  424  434  439  444  446  448 
##  yes   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
##  451  452  456  457  459  461  463  466  472  477  478  479  480  482  483  487 
##   no   no  yes   no   no   no   no  yes   no   no   no   no   no   no   no   no 
##  490  491  492  499  504  507  511  513  515  520  525  533  535  537  538  540 
##   no   no  yes   no   no   no   no   no  yes   no   no   no   no   no   no   no 
##  544  547  552  565  566  568  569  575  579  580  582  585  589  590  592  597 
##   no  yes   no   no   no   no  yes  yes   no   no   no  yes  yes   no   no   no 
##  599  600  601  604  610  615  628  629  631  634  637  642  645  646  649  661 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
##  662  663  667  669  677  679  680  684  687  688  689  690  694  695  697  701 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  706  707  708  709  711  712  715  722  723  729  731  734  737  738  740  742 
##   no   no   no   no   no   no   no  yes   no   no  yes   no  yes  yes   no   no 
##  744  747  751  754  757  765  768  772  777  778  781  784  785  790  795  797 
##   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no 
##  798  799  802  805  806  808  810  811  814  815  816  819  822  827  833  840 
##  yes   no   no  yes   no   no   no   no   no   no  yes   no   no   no  yes   no 
##  842  844  850  851  852  855  857  859  860  862  864  869  874  879  890  893 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
##  899  903  914  915  917  919  922  930  931  932  935  936  937  940  941  949 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no 
##  957  962  965  969  973  974  976  977  979  984  985  989  990  991  993  994 
##   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no   no 
##  995  997  999 1005 1006 1007 1011 1012 1013 1015 1021 1022 1028 1031 1035 1038 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 1042 1044 1047 1052 1056 1062 1067 1068 1070 1075 1077 1080 1089 1091 1098 1099 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1102 1103 1106 1107 1110 1116 1117 1119 1121 1126 1133 1136 1140 1144 1145 1150 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1153 1159 1160 1161 1162 1164 1166 1167 1168 1171 1173 1174 1179 1180 1181 1182 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1185 1190 1196 1197 1202 1204 1206 1207 1208 1209 1210 1211 1230 1232 1233 1234 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 1236 1238 1239 1245 1250 1251 1253 1256 1262 1264 1265 1269 1275 1276 1279 1280 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no 
## 1294 1298 1299 1300 1303 1304 1310 1311 1316 1320 1321 1329 1330 1332 1337 1339 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no 
## 1341 1344 1345 1346 1348 1349 1354 1355 1356 1358 1359 1366 1368 1372 1379 1381 
##   no   no  yes  yes   no   no   no   no   no   no   no   no   no   no   no   no 
## 1385 1387 1392 1397 1401 1404 1405 1407 1409 1410 1412 1417 1424 1425 1426 1428 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1437 1439 1440 1444 1445 1457 1462 1463 1473 1476 1477 1481 1487 1492 1495 1498 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 1499 1501 1507 1509 1510 1514 1516 1518 1521 1524 1530 1533 1534 1538 1539 1542 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes  yes  yes   no 
## 1544 1546 1550 1552 1554 1562 1565 1567 1568 1573 1576 1579 1583 1589 1592 1595 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1596 1598 1601 1604 1607 1608 1609 1611 1614 1615 1617 1624 1625 1627 1631 1632 
##   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 1642 1648 1652 1653 1656 1659 1661 1669 1676 1680 1692 1693 1694 1701 1702 1703 
##   no   no  yes   no   no   no   no   no   no  yes  yes  yes   no   no  yes  yes 
## 1704 1713 1714 1715 1718 1721 1731 1737 1741 1742 1744 1746 1748 1749 1751 1755 
##   no   no  yes   no   no   no   no  yes   no   no  yes   no   no   no   no  yes 
## 1758 1759 1763 1770 1773 1776 1777 1779 1783 1784 1786 1787 1789 1796 1800 1802 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1806 1809 1814 1820 1821 1826 1827 1830 1831 1833 1835 1840 1844 1846 1847 1848 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no  yes   no   no 
## 1853 1857 1861 1864 1866 1867 1872 1877 1878 1880 1882 1889 1890 1895 1899 1901 
##   no   no   no   no  yes   no   no   no   no   no  yes   no   no   no  yes   no 
## 1905 1909 1922 1923 1925 1929 1930 1931 1933 1934 1938 1943 1946 1950 1953 1959 
##   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 1960 1962 1963 1967 1969 1974 1978 1989 1996 2001 2004 2005 2006 2007 2008 2009 
##   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no 
## 2010 2014 2015 2021 2022 2023 2026 2030 2032 2035 2038 2039 2041 2042 2046 2048 
##   no   no   no   no   no   no   no  yes  yes   no   no  yes   no   no   no   no 
## 2049 2059 2060 2066 2069 2075 2076 2078 2083 2087 2088 2089 2093 2095 2096 2097 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2098 2101 2114 2115 2119 2123 2124 2128 2130 2131 2136 2137 2144 2158 2161 2162 
##   no   no  yes   no  yes   no   no   no   no   no   no   no   no   no  yes   no 
## 2164 2165 2169 2172 2175 2178 2180 2183 2185 2186 2191 2195 2198 2207 2208 2211 
##  yes  yes   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
## 2216 2218 2221 2222 2230 2231 2236 2240 2242 2244 2247 2250 2251 2254 2257 2259 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
## 2262 2264 2266 2267 2269 2277 2280 2281 2282 2288 2292 2293 2296 2297 2299 2303 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2315 2318 2322 2326 2327 2330 2333 2337 2340 2343 2349 2354 2357 2363 2366 2368 
##   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no 
## 2370 2372 2373 2377 2378 2379 2381 2385 2387 2388 2395 2399 2411 2414 2417 2426 
##   no   no   no  yes   no   no   no   no  yes   no   no   no   no   no   no   no 
## 2428 2430 2432 2435 2436 2440 2444 2445 2452 2454 2459 2467 2473 2477 2479 2480 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no  yes 
## 2481 2482 2488 2489 2490 2495 2496 2501 2512 2513 2523 2526 2528 2529 2530 2532 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2542 2547 2548 2553 2554 2559 2566 2567 2569 2578 2584 2586 2591 2592 2598 2599 
##   no   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no 
## 2613 2615 2618 2619 2622 2627 2641 2647 2659 2660 2661 2666 2667 2670 2679 2682 
##   no  yes   no   no   no   no   no   no   no   no  yes   no  yes   no   no   no 
## 2686 2699 2704 2707 2714 2718 2719 2723 2727 2728 2729 2733 2734 2735 2739 2743 
##   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 2748 2749 2751 2752 2755 2756 2757 2758 2759 2762 2767 2772 2773 2774 2779 2782 
##  yes   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 2789 2790 2801 2803 2808 2809 2818 2822 2824 2835 2839 2840 2843 2850 2856 2857 
##   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 2861 2862 2863 2866 2873 2879 2885 2886 2890 2891 2895 2898 2899 2903 2909 2911 
##   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no  yes   no 
## 2916 2919 2923 2925 2927 2928 2935 2939 2941 2942 2945 2947 2948 2952 2967 2968 
##   no   no   no  yes  yes   no   no   no   no   no   no   no  yes   no   no   no 
## 2969 2977 2978 2979 2984 2985 2986 2994 2998 3003 3005 3008 3009 3011 3014 3017 
##  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 3018 3020 3022 3030 3035 3039 3042 3043 3046 3047 3049 3050 3052 3054 3055 3056 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 3062 3064 3068 3069 3070 3073 3075 3077 3081 3084 3088 3100 3104 3105 3109 3111 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
## 3117 3119 3124 3126 3128 3131 3135 3138 3148 3152 3153 3154 3157 3160 3161 3167 
##   no   no   no   no  yes   no   no   no   no  yes   no   no   no   no   no   no 
## 3169 3177 3180 3183 3184 3191 3193 3195 3198 3202 3203 3205 3207 3208 3209 3213 
##  yes   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
## 3218 3223 3228 3230 3233 3235 3240 3241 3245 3246 3252 3259 3263 3264 3267 3269 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
## 3280 3282 3283 3291 3296 3297 3301 3305 3306 3307 3310 3312 3314 3316 3325 3327 
##   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no 
## 3330 3336 3338 3343 3348 3349 3350 3351 3353 3358 3359 3363 3372 3374 3378 3379 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 3381 3389 3390 3391 3393 3396 3397 3401 3403 3404 3414 3417 3419 3432 3435 3438 
##   no   no   no   no   no  yes   no   no   no   no  yes   no   no   no   no   no 
## 3439 3441 3443 3444 3449 3451 3455 3456 3457 3459 3461 3463 3472 3475 3476 3478 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3480 3482 3484 3486 3489 3491 3492 3493 3495 3501 3505 3507 3508 3512 3514 3519 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3534 3535 3538 3539 3547 3550 3557 3561 3567 3572 3577 3589 3597 3598 3600 3604 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
## 3605 3607 3610 3615 3617 3621 3622 3628 3631 3637 3640 3643 3644 3645 3649 3651 
##  yes   no  yes   no  yes   no   no   no  yes   no   no   no   no   no   no   no 
## 3653 3660 3664 3665 3666 3674 3675 3677 3678 3683 3687 3688 3689 3694 3697 3699 
##   no  yes   no   no  yes   no   no   no   no   no  yes   no  yes   no   no   no 
## 3702 3709 3710 3711 3712 3718 3726 3729 3734 3736 3742 3746 3749 3750 3752 3766 
##   no   no   no   no   no  yes   no   no  yes   no   no   no   no   no   no   no 
## 3771 3774 3776 3778 3780 3782 3787 3792 3800 3801 3802 3804 3810 3811 3812 3814 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3819 3822 3825 3829 3833 3835 3836 3837 3839 3841 3846 3849 3851 3852 3854 3860 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 3862 3876 3877 3886 3889 3892 3895 3902 3905 3906 3911 3913 3916 3918 3920 3921 
##   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no   no 
## 3922 3925 3929 3930 3932 3934 3939 3948 3957 3960 3961 3962 3965 3966 3967 3974 
##   no   no   no  yes  yes   no   no   no   no   no   no   no   no   no  yes  yes 
## 3978 3981 3984 3986 3988 3991 3995 3999 4005 4010 4011 4018 4019 4020 4028 4033 
##   no   no   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no 
## 4039 4042 4046 4050 4051 4052 4057 4058 4060 4062 4065 4068 4083 4084 4091 4093 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4099 4100 4102 4103 4111 4114 4116 4118 4122 4123 4124 4126 4130 4131 4140 4142 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no  yes   no  yes 
## 4145 4146 4156 4159 4171 4177 4178 4179 4183 4186 4193 4196 4198 4206 4209 4211 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4212 4214 4215 4217 4218 4219 4226 4227 4237 4238 4240 4243 4244 4245 4246 4247 
##   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no   no 
## 4248 4253 4254 4265 4266 4271 4275 4280 4286 4290 4294 4295 4296 4307 4311 4312 
##   no   no  yes  yes   no   no   no   no  yes   no   no   no   no   no   no   no 
## 4313 4314 4317 4318 4320 4328 4329 4331 4333 4335 4344 4345 4346 4350 4355 4361 
##   no   no   no   no   no   no  yes  yes  yes   no   no   no   no   no   no   no 
## 4365 4366 4367 4368 4376 4377 4378 4379 4381 4383 4384 4388 4395 4399 4403 4404 
##   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 4405 4407 4409 4415 4417 4421 4422 4423 4425 4429 4436 4437 4449 4451 4452 4454 
##  yes  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4455 4457 4460 4461 4462 4465 4468 4469 4471 4472 4474 4477 4478 4480 4481 4483 
##   no   no   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no 
## 4484 4485 4486 4487 4488 4490 4491 4492 4494 4497 4499 4500 4511 4512 4514 4525 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no 
## 4528 4535 4538 4541 4543 4545 4549 4553 4557 4558 4559 4566 4567 4569 4573 4575 
##  yes   no  yes   no   no   no   no   no   no   no   no   no   no  yes  yes   no 
## 4577 4583 4586 4587 4588 4589 4592 4600 4602 4604 4605 4610 4613 4614 4616 4617 
##  yes   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no 
## 4620 4622 4623 4628 4633 4637 4640 4641 4643 4644 4653 4655 4660 4662 4664 4668 
##   no   no   no   no   no  yes   no  yes   no  yes   no   no   no   no   no   no 
## 4669 4674 4679 4684 4687 4688 4689 4691 4696 4710 4711 4717 4721 4725 4726 4739 
##   no   no   no   no   no  yes   no   no   no   no  yes   no   no   no   no   no 
## 4740 4742 4750 4752 4755 4764 4766 4769 4773 4781 4788 4792 4796 4798 4799 4817 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no 
## 4818 4822 4823 4826 4828 4832 4834 4836 4843 4846 4848 4857 4858 4859 4862 4863 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes  yes 
## 4864 4865 4872 4873 4875 4879 4880 4881 4886 4887 4890 4893 4894 4901 4903 4907 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4912 4916 4921 4922 4925 4931 4934 4935 4938 4940 4943 4944 4948 4949 4951 4953 
##   no   no   no   no  yes   no   no   no  yes  yes   no  yes   no  yes   no   no 
## 4955 4957 4962 4969 4971 4974 4977 4978 4989 4990 4996 4997 
##   no   no   no   no   no   no   no   no   no   no   no   no 
## Levels: no yes</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="决策树及其组合方法.html#cb33-1" aria-hidden="true" tabindex="-1"></a>ran_pred1 <span class="ot">&lt;-</span><span class="fu">data.frame</span>(ran_pred)</span>
<span id="cb33-2"><a href="决策树及其组合方法.html#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="决策树及其组合方法.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(testData<span class="sc">$</span>churn ,ran_pred) <span class="co"># confusion matrix</span></span></code></pre></div>
<pre><code>##      ran_pred
##         no  yes
##   no  1276   12
##   yes   56  156</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="决策树及其组合方法.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#accuracy rate </span></span>
<span id="cb35-2"><a href="决策树及其组合方法.html#cb35-2" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1276</span><span class="sc">+</span> <span class="dv">173</span>)<span class="sc">/</span>(<span class="dv">1276</span><span class="sc">+</span><span class="dv">12</span><span class="sc">+</span><span class="dv">39</span><span class="sc">+</span><span class="dv">173</span>) <span class="co"># 97 % of accuracy : higher than decision tree , where accuracy rate is 95 % </span></span></code></pre></div>
<pre><code>## [1] 0.966</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="决策树及其组合方法.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#most commonly mean decrease gini is considered</span></span>
<span id="cb37-2"><a href="决策树及其组合方法.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">importance</span>(random_model)</span></code></pre></div>
<pre><code>##                                       no         yes MeanDecreaseAccuracy
## international_plan            77.8380603  90.2183139            95.663882
## voice_mail_plan               21.3117980  23.0070977            24.546717
## number_vmail_messages         17.9222164  22.7532876            22.312924
## total_day_minutes             30.6056895  35.9826809            40.713847
## total_day_calls                1.6914349  -0.8919227             1.082631
## total_day_charge              30.3054948  36.4465992            39.708710
## total_eve_minutes             22.2421901  22.7245788            26.333429
## total_eve_calls               -0.6135914  -3.3872334            -2.152008
## total_eve_charge              22.2710407  24.0339867            26.754886
## total_night_minutes           17.8166195   4.8021203            18.733896
## total_night_calls             -0.9051602  -0.4741670            -1.028339
## total_night_charge            17.4641751   5.1109328            18.342858
## total_intl_minutes            22.6314916  19.9938388            27.255915
## total_intl_calls              31.9899119  49.6588126            49.222862
## total_intl_charge             22.8950573  17.8231920            25.769278
## number_customer_service_calls 78.3118550 103.2041001           107.451425
##                               MeanDecreaseGini
## international_plan                    83.30416
## voice_mail_plan                       17.36941
## number_vmail_messages                 22.79269
## total_day_minutes                    123.55116
## total_day_calls                       25.78456
## total_day_charge                     120.28130
## total_eve_minutes                     56.72754
## total_eve_calls                       23.46655
## total_eve_charge                      55.49323
## total_night_minutes                   34.28495
## total_night_calls                     23.30244
## total_night_charge                    32.63309
## total_intl_minutes                    36.66887
## total_intl_calls                      50.45734
## total_intl_charge                     36.99160
## number_customer_service_calls        106.37734</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="决策树及其组合方法.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables that result in nodes with higher purity have a higher decrease in Gini coefficient.</span></span>
<span id="cb39-2"><a href="决策树及其组合方法.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">varImpPlot</span>(random_model)</span></code></pre></div>
<p><img src="07-decisiontree_files/figure-html/project-2.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="决策树及其组合方法.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#total day charges have higher decrease in gini index so its more significant than other</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="logistic回归.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="github使用.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-decisiontree.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
