<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 决策树及其组合方法 | 数据科学导论（Introductory of Data Science）</title>
  <meta name="description" content="2022年数据科学导论" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 决策树及其组合方法 | 数据科学导论（Introductory of Data Science）" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="2022年数据科学导论" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 决策树及其组合方法 | 数据科学导论（Introductory of Data Science）" />
  
  <meta name="twitter:description" content="2022年数据科学导论" />
  

<meta name="author" content="潘蓄林" />


<meta name="date" content="2022-06-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="logistic回归.html"/>
<link rel="next" href="github使用.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">数据科学导论(Introductory of Data Science)</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 前言（Prerequisites）<span></span></a></li>
<li class="chapter" data-level="2" data-path="r及python语言简介.html"><a href="r及python语言简介.html"><i class="fa fa-check"></i><b>2</b> R及Python语言简介<span></span></a>
<ul>
<li class="chapter" data-level="2.0.1" data-path="r及python语言简介.html"><a href="r及python语言简介.html#r简介"><i class="fa fa-check"></i><b>2.0.1</b> R简介<span></span></a></li>
<li class="chapter" data-level="2.0.2" data-path="r及python语言简介.html"><a href="r及python语言简介.html#r语言安装及环境配置"><i class="fa fa-check"></i><b>2.0.2</b> R语言安装及环境配置<span></span></a></li>
<li class="chapter" data-level="2.0.3" data-path="r及python语言简介.html"><a href="r及python语言简介.html#rstudio软件安装"><i class="fa fa-check"></i><b>2.0.3</b> Rstudio软件安装<span></span></a></li>
<li class="chapter" data-level="2.0.4" data-path="r及python语言简介.html"><a href="r及python语言简介.html#r基础"><i class="fa fa-check"></i><b>2.0.4</b> R基础<span></span></a></li>
<li class="chapter" data-level="2.0.5" data-path="r及python语言简介.html"><a href="r及python语言简介.html#python语言安装及环境配置"><i class="fa fa-check"></i><b>2.0.5</b> python语言安装及环境配置<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="数据描述.html"><a href="数据描述.html"><i class="fa fa-check"></i><b>3</b> 数据描述<span></span></a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="数据描述.html"><a href="数据描述.html#数据的意义及获取"><i class="fa fa-check"></i><b>3.0.1</b> 数据的意义及获取<span></span></a></li>
<li class="chapter" data-level="3.0.2" data-path="数据描述.html"><a href="数据描述.html#简单的数据汇总"><i class="fa fa-check"></i><b>3.0.2</b> 简单的数据汇总<span></span></a></li>
<li class="chapter" data-level="3.0.3" data-path="数据描述.html"><a href="数据描述.html#数据的可视化"><i class="fa fa-check"></i><b>3.0.3</b> 数据的可视化<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="数据整理和清理.html"><a href="数据整理和清理.html"><i class="fa fa-check"></i><b>4</b> 数据整理和清理<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="数据整理和清理.html"><a href="数据整理和清理.html#数据的筛选"><i class="fa fa-check"></i><b>4.1</b> 数据的筛选<span></span></a></li>
<li class="chapter" data-level="4.2" data-path="数据整理和清理.html"><a href="数据整理和清理.html#数据合并"><i class="fa fa-check"></i><b>4.2</b> 数据合并<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="数据整理和清理.html"><a href="数据整理和清理.html#数据的缺失"><i class="fa fa-check"></i><b>4.3</b> 数据的缺失<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="数据整理和清理.html"><a href="数据整理和清理.html#缺失值的审视与标记"><i class="fa fa-check"></i><b>4.3.1</b> 缺失值的审视与标记<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="数据整理和清理.html"><a href="数据整理和清理.html#删除缺失值的方法及问题"><i class="fa fa-check"></i><b>4.3.2</b> 删除缺失值的方法及问题<span></span></a></li>
<li class="chapter" data-level="4.3.3" data-path="数据整理和清理.html"><a href="数据整理和清理.html#利用可预测模型来填补缺失值"><i class="fa fa-check"></i><b>4.3.3</b> 利用可预测模型来填补缺失值<span></span></a></li>
<li class="chapter" data-level="4.3.4" data-path="数据整理和清理.html"><a href="数据整理和清理.html#处理缺失值的r包"><i class="fa fa-check"></i><b>4.3.4</b> 处理缺失值的R包<span></span></a></li>
<li class="chapter" data-level="4.3.5" data-path="数据整理和清理.html"><a href="数据整理和清理.html#实例"><i class="fa fa-check"></i><b>4.3.5</b> 实例<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="有监督学习概论.html"><a href="有监督学习概论.html"><i class="fa fa-check"></i><b>5</b> 有监督学习概论<span></span></a>
<ul>
<li class="chapter" data-level="5.0.1" data-path="有监督学习概论.html"><a href="有监督学习概论.html#机器学习"><i class="fa fa-check"></i><b>5.0.1</b> 机器学习<span></span></a></li>
<li class="chapter" data-level="5.0.2" data-path="有监督学习概论.html"><a href="有监督学习概论.html#机器学习实例"><i class="fa fa-check"></i><b>5.0.2</b> 机器学习实例<span></span></a></li>
<li class="chapter" data-level="5.1" data-path="有监督学习概论.html"><a href="有监督学习概论.html#模型及拟合"><i class="fa fa-check"></i><b>5.1</b> 模型及拟合<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="有监督学习概论.html"><a href="有监督学习概论.html#训练最小二乘线性回归模型的例子"><i class="fa fa-check"></i><b>5.2</b> 训练最小二乘线性回归模型的例子<span></span></a></li>
<li class="chapter" data-level="5.3" data-path="有监督学习概论.html"><a href="有监督学习概论.html#模型评价"><i class="fa fa-check"></i><b>5.3</b> 模型评价<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="有监督学习概论.html"><a href="有监督学习概论.html#exercise"><i class="fa fa-check"></i><b>5.4</b> Exercise<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html"><i class="fa fa-check"></i><b>6</b> 最小二乘线性回归法<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#相关概念"><i class="fa fa-check"></i><b>6.1</b> 相关概念<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#线性模型"><i class="fa fa-check"></i><b>6.2</b> 线性模型<span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#模型的估计"><i class="fa fa-check"></i><b>6.2.1</b> 模型的估计<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#简单线性模型simple-linear-modelslm"><i class="fa fa-check"></i><b>6.2.2</b> 简单线性模型(Simple Linear Model,SLM)<span></span></a></li>
<li class="chapter" data-level="6.2.3" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#多元线性回归multiple-linear-modelmlm"><i class="fa fa-check"></i><b>6.2.3</b> 多元线性回归(Multiple Linear Model,mlm)<span></span></a></li>
<li class="chapter" data-level="6.2.4" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#回归实例"><i class="fa fa-check"></i><b>6.2.4</b> 回归实例<span></span></a></li>
<li class="chapter" data-level="6.2.5" data-path="最小二乘线性回归法.html"><a href="最小二乘线性回归法.html#练习"><i class="fa fa-check"></i><b>6.2.5</b> 练习<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="logistic回归.html"><a href="logistic回归.html"><i class="fa fa-check"></i><b>7</b> Logistic回归<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="logistic回归.html"><a href="logistic回归.html#相关概念-1"><i class="fa fa-check"></i><b>7.1</b> 相关概念<span></span></a></li>
<li class="chapter" data-level="7.2" data-path="logistic回归.html"><a href="logistic回归.html#logistic模型"><i class="fa fa-check"></i><b>7.2</b> Logistic模型<span></span></a></li>
<li class="chapter" data-level="7.3" data-path="logistic回归.html"><a href="logistic回归.html#模型估计"><i class="fa fa-check"></i><b>7.3</b> 模型估计<span></span></a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="logistic回归.html"><a href="logistic回归.html#损失函数loss-function"><i class="fa fa-check"></i><b>7.3.1</b> 损失函数(Loss function)<span></span></a></li>
<li class="chapter" data-level="7.3.2" data-path="logistic回归.html"><a href="logistic回归.html#代价函数cost-funtion"><i class="fa fa-check"></i><b>7.3.2</b> 代价函数(Cost funtion)<span></span></a></li>
<li class="chapter" data-level="7.3.3" data-path="logistic回归.html"><a href="logistic回归.html#模型估计estimation"><i class="fa fa-check"></i><b>7.3.3</b> 模型估计(estimation)<span></span></a></li>
<li class="chapter" data-level="7.3.4" data-path="logistic回归.html"><a href="logistic回归.html#模拟数据模型"><i class="fa fa-check"></i><b>7.3.4</b> 模拟数据模型<span></span></a></li>
<li class="chapter" data-level="7.3.5" data-path="logistic回归.html"><a href="logistic回归.html#logistic回归实例模型"><i class="fa fa-check"></i><b>7.3.5</b> Logistic回归实例模型<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="决策树及其组合方法.html"><a href="决策树及其组合方法.html"><i class="fa fa-check"></i><b>8</b> 决策树及其组合方法<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="决策树及其组合方法.html"><a href="决策树及其组合方法.html#决策树"><i class="fa fa-check"></i><b>8.1</b> 决策树<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="决策树及其组合方法.html"><a href="决策树及其组合方法.html#实例-1"><i class="fa fa-check"></i><b>8.2</b> 实例<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github使用.html"><a href="github使用.html"><i class="fa fa-check"></i><b>9</b> github使用<span></span></a></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">数据科学导论（Introductory of Data Science）</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="决策树及其组合方法" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> 决策树及其组合方法<a href="决策树及其组合方法.html#决策树及其组合方法" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<ul>
<li><p>Decision Tree: A decision tree is a decision support tool that uses a tree-like graph or model of decisions and their possible consequences, including chance event outcomes, resource costs, and utility.</p></li>
<li><p>Decision trees are produced by algorithms that identify various ways of splitting a data set into branch-like segments. These segments form an inverted decision tree that originates with a root node at the top of the tree.</p></li>
</ul>
<div id="决策树" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> 决策树<a href="决策树及其组合方法.html#决策树" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="实例-1" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> 实例<a href="决策树及其组合方法.html#实例-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="决策树及其组合方法.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb1-2"><a href="决策树及其组合方法.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># importing churn data set from .csv file</span></span>
<span id="cb1-3"><a href="决策树及其组合方法.html#cb1-3" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;./data/chun_data.csv&quot;</span>,<span class="at">header=</span> <span class="cn">TRUE</span>,<span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span>
<span id="cb1-4"><a href="决策树及其组合方法.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="决策树及其组合方法.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#as the first three columns of the data arent important for the prediction we drop those columns from the data frame </span></span>
<span id="cb1-6"><a href="决策树及其组合方法.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># drop the variables from the data set</span></span>
<span id="cb1-7"><a href="决策树及其组合方法.html#cb1-7" aria-hidden="true" tabindex="-1"></a>data1<span class="ot">&lt;-</span>data1[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)]</span>
<span id="cb1-8"><a href="决策树及其组合方法.html#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="决策树及其组合方法.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">#data exploration</span></span>
<span id="cb1-10"><a href="决策树及其组合方法.html#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="决策树及其组合方法.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#gives the dimensions of the data set</span></span>
<span id="cb1-12"><a href="决策树及其组合方法.html#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data1)</span></code></pre></div>
<pre><code>## [1] 5000   17</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="决策树及其组合方法.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gives the names of the variables in the data set</span></span>
<span id="cb3-2"><a href="决策树及其组合方法.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data1)</span></code></pre></div>
<pre><code>##  [1] &quot;international_plan&quot;            &quot;voice_mail_plan&quot;              
##  [3] &quot;number_vmail_messages&quot;         &quot;total_day_minutes&quot;            
##  [5] &quot;total_day_calls&quot;               &quot;total_day_charge&quot;             
##  [7] &quot;total_eve_minutes&quot;             &quot;total_eve_calls&quot;              
##  [9] &quot;total_eve_charge&quot;              &quot;total_night_minutes&quot;          
## [11] &quot;total_night_calls&quot;             &quot;total_night_charge&quot;           
## [13] &quot;total_intl_minutes&quot;            &quot;total_intl_calls&quot;             
## [15] &quot;total_intl_charge&quot;             &quot;number_customer_service_calls&quot;
## [17] &quot;churn&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="决策树及其组合方法.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#displays top 10 observations of the data set</span></span>
<span id="cb5-2"><a href="决策树及其组合方法.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data1)</span></code></pre></div>
<pre><code>##   international_plan voice_mail_plan number_vmail_messages total_day_minutes
## 1                 no             yes                    25             265.1
## 2                 no             yes                    26             161.6
## 3                 no              no                     0             243.4
## 4                yes              no                     0             299.4
## 5                yes              no                     0             166.7
## 6                yes              no                     0             223.4
##   total_day_calls total_day_charge total_eve_minutes total_eve_calls
## 1             110            45.07             197.4              99
## 2             123            27.47             195.5             103
## 3             114            41.38             121.2             110
## 4              71            50.90              61.9              88
## 5             113            28.34             148.3             122
## 6              98            37.98             220.6             101
##   total_eve_charge total_night_minutes total_night_calls total_night_charge
## 1            16.78               244.7                91              11.01
## 2            16.62               254.4               103              11.45
## 3            10.30               162.6               104               7.32
## 4             5.26               196.9                89               8.86
## 5            12.61               186.9               121               8.41
## 6            18.75               203.9               118               9.18
##   total_intl_minutes total_intl_calls total_intl_charge
## 1               10.0                3              2.70
## 2               13.7                3              3.70
## 3               12.2                5              3.29
## 4                6.6                7              1.78
## 5               10.1                3              2.73
## 6                6.3                6              1.70
##   number_customer_service_calls churn
## 1                             1    no
## 2                             1    no
## 3                             0    no
## 4                             2    no
## 5                             3    no
## 6                             0    no</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="决策树及其组合方法.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#displays bottom top 10 observations of the data set</span></span>
<span id="cb7-2"><a href="决策树及其组合方法.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(data1)</span></code></pre></div>
<pre><code>##      international_plan voice_mail_plan number_vmail_messages total_day_minutes
## 4995                 no              no                     0             170.7
## 4996                 no             yes                    40             235.7
## 4997                 no              no                     0             184.2
## 4998                 no              no                     0             140.6
## 4999                 no              no                     0             188.8
## 5000                 no             yes                    34             129.4
##      total_day_calls total_day_charge total_eve_minutes total_eve_calls
## 4995             101            29.02             193.1             126
## 4996             127            40.07             223.0             126
## 4997              90            31.31             256.8              73
## 4998              89            23.90             172.8             128
## 4999              67            32.10             171.7              92
## 5000             102            22.00             267.1             104
##      total_eve_charge total_night_minutes total_night_calls total_night_charge
## 4995            16.41               129.1               104               5.81
## 4996            18.96               297.5               116              13.39
## 4997            21.83               213.6               113               9.61
## 4998            14.69               212.4                97               9.56
## 4999            14.59               224.4                89              10.10
## 5000            22.70               154.8               100               6.97
##      total_intl_minutes total_intl_calls total_intl_charge
## 4995                6.9                7              1.86
## 4996                9.9                5              2.67
## 4997               14.7                2              3.97
## 4998               13.6                4              3.67
## 4999                8.5                6              2.30
## 5000                9.3               16              2.51
##      number_customer_service_calls churn
## 4995                             1    no
## 4996                             2    no
## 4997                             3   yes
## 4998                             1    no
## 4999                             0    no
## 5000                             0    no</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="决策树及其组合方法.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#displays structure of the variables in the data set</span></span>
<span id="cb9-2"><a href="决策树及其组合方法.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data1)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    5000 obs. of  17 variables:
##  $ international_plan           : chr  &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;yes&quot; ...
##  $ voice_mail_plan              : chr  &quot;yes&quot; &quot;yes&quot; &quot;no&quot; &quot;no&quot; ...
##  $ number_vmail_messages        : int  25 26 0 0 0 0 24 0 0 37 ...
##  $ total_day_minutes            : num  265 162 243 299 167 ...
##  $ total_day_calls              : int  110 123 114 71 113 98 88 79 97 84 ...
##  $ total_day_charge             : num  45.1 27.5 41.4 50.9 28.3 ...
##  $ total_eve_minutes            : num  197.4 195.5 121.2 61.9 148.3 ...
##  $ total_eve_calls              : int  99 103 110 88 122 101 108 94 80 111 ...
##  $ total_eve_charge             : num  16.78 16.62 10.3 5.26 12.61 ...
##  $ total_night_minutes          : num  245 254 163 197 187 ...
##  $ total_night_calls            : int  91 103 104 89 121 118 118 96 90 97 ...
##  $ total_night_charge           : num  11.01 11.45 7.32 8.86 8.41 ...
##  $ total_intl_minutes           : num  10 13.7 12.2 6.6 10.1 6.3 7.5 7.1 8.7 11.2 ...
##  $ total_intl_calls             : int  3 3 5 7 3 6 7 6 4 5 ...
##  $ total_intl_charge            : num  2.7 3.7 3.29 1.78 2.73 1.7 2.03 1.92 2.35 3.02 ...
##  $ number_customer_service_calls: int  1 1 0 2 3 0 3 0 1 0 ...
##  $ churn                        : chr  &quot;no&quot; &quot;no&quot; &quot;no&quot; &quot;no&quot; ...</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="决策树及其组合方法.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#gives the summary of the variables of the data set </span></span>
<span id="cb11-2"><a href="决策树及其组合方法.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data1)</span></code></pre></div>
<pre><code>##  international_plan voice_mail_plan    number_vmail_messages total_day_minutes
##  Length:5000        Length:5000        Min.   : 0.000        Min.   :  0.0    
##  Class :character   Class :character   1st Qu.: 0.000        1st Qu.:143.7    
##  Mode  :character   Mode  :character   Median : 0.000        Median :180.1    
##                                        Mean   : 7.755        Mean   :180.3    
##                                        3rd Qu.:17.000        3rd Qu.:216.2    
##                                        Max.   :52.000        Max.   :351.5    
##  total_day_calls total_day_charge total_eve_minutes total_eve_calls
##  Min.   :  0     Min.   : 0.00    Min.   :  0.0     Min.   :  0.0  
##  1st Qu.: 87     1st Qu.:24.43    1st Qu.:166.4     1st Qu.: 87.0  
##  Median :100     Median :30.62    Median :201.0     Median :100.0  
##  Mean   :100     Mean   :30.65    Mean   :200.6     Mean   :100.2  
##  3rd Qu.:113     3rd Qu.:36.75    3rd Qu.:234.1     3rd Qu.:114.0  
##  Max.   :165     Max.   :59.76    Max.   :363.7     Max.   :170.0  
##  total_eve_charge total_night_minutes total_night_calls total_night_charge
##  Min.   : 0.00    Min.   :  0.0       Min.   :  0.00    Min.   : 0.000    
##  1st Qu.:14.14    1st Qu.:166.9       1st Qu.: 87.00    1st Qu.: 7.510    
##  Median :17.09    Median :200.4       Median :100.00    Median : 9.020    
##  Mean   :17.05    Mean   :200.4       Mean   : 99.92    Mean   : 9.018    
##  3rd Qu.:19.90    3rd Qu.:234.7       3rd Qu.:113.00    3rd Qu.:10.560    
##  Max.   :30.91    Max.   :395.0       Max.   :175.00    Max.   :17.770    
##  total_intl_minutes total_intl_calls total_intl_charge
##  Min.   : 0.00      Min.   : 0.000   Min.   :0.000    
##  1st Qu.: 8.50      1st Qu.: 3.000   1st Qu.:2.300    
##  Median :10.30      Median : 4.000   Median :2.780    
##  Mean   :10.26      Mean   : 4.435   Mean   :2.771    
##  3rd Qu.:12.00      3rd Qu.: 6.000   3rd Qu.:3.240    
##  Max.   :20.00      Max.   :20.000   Max.   :5.400    
##  number_customer_service_calls    churn          
##  Min.   :0.00                  Length:5000       
##  1st Qu.:1.00                  Class :character  
##  Median :1.00                  Mode  :character  
##  Mean   :1.57                                    
##  3rd Qu.:2.00                                    
##  Max.   :9.00</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="决策树及其组合方法.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library for the sample.split function</span></span>
<span id="cb13-2"><a href="决策树及其组合方法.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caTools)</span>
<span id="cb13-3"><a href="决策树及其组合方法.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="决策树及其组合方法.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#splitting the data into training and testing data </span></span>
<span id="cb13-5"><a href="决策树及其组合方法.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># sample the input data with 70% for training and 30% for testing</span></span>
<span id="cb13-6"><a href="决策树及其组合方法.html#cb13-6" aria-hidden="true" tabindex="-1"></a>data1<span class="sc">$</span>churn <span class="ot">&lt;-</span> <span class="fu">factor</span>(data1<span class="sc">$</span>churn)</span>
<span id="cb13-7"><a href="决策树及其组合方法.html#cb13-7" aria-hidden="true" tabindex="-1"></a>sample <span class="ot">&lt;-</span> <span class="fu">sample.split</span>(data1<span class="sc">$</span>churn,<span class="at">SplitRatio=</span><span class="fl">0.70</span>)</span>
<span id="cb13-8"><a href="决策树及其组合方法.html#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="决策树及其组合方法.html#cb13-9" aria-hidden="true" tabindex="-1"></a>trainData <span class="ot">&lt;-</span> <span class="fu">subset</span>(data1,sample<span class="sc">==</span><span class="cn">TRUE</span>)</span>
<span id="cb13-10"><a href="决策树及其组合方法.html#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="决策树及其组合方法.html#cb13-11" aria-hidden="true" tabindex="-1"></a>testData <span class="ot">&lt;-</span> <span class="fu">subset</span>(data1,sample<span class="sc">==</span><span class="cn">FALSE</span>)</span>
<span id="cb13-12"><a href="决策树及其组合方法.html#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="决策树及其组合方法.html#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#rpart --- recursive partitioning decision tree</span></span>
<span id="cb13-14"><a href="决策树及其组合方法.html#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)</span>
<span id="cb13-15"><a href="决策树及其组合方法.html#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="决策树及其组合方法.html#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">#TO BUILD DECISON TREE BY USING RPART PACKAGE(recursive partitioning decision tree)</span></span>
<span id="cb13-17"><a href="决策树及其组合方法.html#cb13-17" aria-hidden="true" tabindex="-1"></a>churn_model<span class="ot">&lt;-</span> <span class="fu">rpart</span>(churn <span class="sc">~</span> .,<span class="at">data=</span>trainData)</span>
<span id="cb13-18"><a href="决策树及其组合方法.html#cb13-18" aria-hidden="true" tabindex="-1"></a>churn_model</span></code></pre></div>
<pre><code>## n= 3500 
## 
## node), split, n, loss, yval, (yprob)
##       * denotes terminal node
## 
##  1) root 3500 495 no (0.85857143 0.14142857)  
##    2) total_day_minutes&lt; 264.65 3286 363 no (0.88953135 0.11046865)  
##      4) number_customer_service_calls&lt; 3.5 3014 227 no (0.92468480 0.07531520)  
##        8) international_plan=no 2747 134 no (0.95121951 0.04878049)  
##         16) total_day_minutes&lt; 232.7 2446  75 no (0.96933769 0.03066231) *
##         17) total_day_minutes&gt;=232.7 301  59 no (0.80398671 0.19601329)  
##           34) total_eve_minutes&lt; 242.35 240  22 no (0.90833333 0.09166667) *
##           35) total_eve_minutes&gt;=242.35 61  24 yes (0.39344262 0.60655738)  
##             70) voice_mail_plan=yes 14   0 no (1.00000000 0.00000000) *
##             71) voice_mail_plan=no 47  10 yes (0.21276596 0.78723404) *
##        9) international_plan=yes 267  93 no (0.65168539 0.34831461)  
##         18) total_intl_minutes&lt; 13.1 220  46 no (0.79090909 0.20909091)  
##           36) total_intl_calls&gt;=2.5 179   5 no (0.97206704 0.02793296) *
##           37) total_intl_calls&lt; 2.5 41   0 yes (0.00000000 1.00000000) *
##         19) total_intl_minutes&gt;=13.1 47   0 yes (0.00000000 1.00000000) *
##      5) number_customer_service_calls&gt;=3.5 272 136 no (0.50000000 0.50000000)  
##       10) total_day_minutes&gt;=162.95 163  42 no (0.74233129 0.25766871)  
##         20) total_eve_minutes&gt;=141.45 142  28 no (0.80281690 0.19718310) *
##         21) total_eve_minutes&lt; 141.45 21   7 yes (0.33333333 0.66666667) *
##       11) total_day_minutes&lt; 162.95 109  15 yes (0.13761468 0.86238532) *
##    3) total_day_minutes&gt;=264.65 214  82 yes (0.38317757 0.61682243)  
##      6) voice_mail_plan=yes 51   6 no (0.88235294 0.11764706) *
##      7) voice_mail_plan=no 163  37 yes (0.22699387 0.77300613)  
##       14) total_eve_minutes&lt; 189.45 68  33 no (0.51470588 0.48529412)  
##         28) total_day_minutes&lt; 288.5 44  11 no (0.75000000 0.25000000) *
##         29) total_day_minutes&gt;=288.5 24   2 yes (0.08333333 0.91666667) *
##       15) total_eve_minutes&gt;=189.45 95   2 yes (0.02105263 0.97894737) *</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="决策树及其组合方法.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#to display it in diagram</span></span>
<span id="cb15-2"><a href="决策树及其组合方法.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="决策树及其组合方法.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rattle)</span></code></pre></div>
<pre><code>## Loading required package: tibble</code></pre>
<pre><code>## Loading required package: bitops</code></pre>
<pre><code>## Rattle: A free graphical interface for data science with R.
## Version 5.5.1 Copyright (c) 2006-2021 Togaware Pty Ltd.
## Type &#39;rattle()&#39; to shake, rattle, and roll your data.</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="决策树及其组合方法.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart.plot)</span>
<span id="cb19-2"><a href="决策树及其组合方法.html#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="决策树及其组合方法.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fancyRpartPlot</span>(churn_model)</span></code></pre></div>
<p><img src="07-decisiontree_files/figure-html/project-1.png" width="672" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="决策树及其组合方法.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#predicting the model data based on the model built from training data set</span></span>
<span id="cb20-2"><a href="决策树及其组合方法.html#cb20-2" aria-hidden="true" tabindex="-1"></a>pred<span class="ot">&lt;-</span> <span class="fu">predict</span>(churn_model,testData,<span class="at">type =</span> <span class="st">&quot;class&quot;</span> )</span>
<span id="cb20-3"><a href="决策树及其组合方法.html#cb20-3" aria-hidden="true" tabindex="-1"></a>pred</span></code></pre></div>
<pre><code>##    4    5    6    7   10   13   15   16   17   23   27   31   32   35   36   37 
##  yes   no   no   no   no   no  yes  yes   no   no   no   no   no   no   no   no 
##   41   46   48   49   50   58   59   60   62   64   66   68   69   78   80   81 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no  yes   no   no 
##   82   86   93   95  101  113  120  121  122  133  137  141  144  145  147  150 
##   no   no   no   no  yes  yes   no   no   no   no   no   no   no  yes   no   no 
##  168  175  176  177  184  188  195  196  197  198  206  211  213  214  215  223 
##   no   no   no   no   no  yes   no   no   no  yes   no   no   no   no  yes   no 
##  228  229  230  232  238  240  248  249  250  254  258  260  261  262  263  264 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  265  266  270  271  272  276  279  283  290  293  295  296  298  304  311  313 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
##  314  315  316  319  320  324  325  327  328  330  331  337  339  343  344  354 
##   no   no   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no 
##  356  357  358  368  370  373  374  376  378  380  381  387  394  395  396  402 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
##  405  406  407  409  410  416  417  418  419  421  423  432  440  441  442  449 
##   no   no   no   no   no  yes  yes   no   no   no   no   no   no   no   no   no 
##  452  453  455  460  464  468  471  474  479  481  486  494  500  504  508  509 
##   no   no  yes   no   no   no   no  yes   no   no   no   no   no   no   no   no 
##  512  513  515  518  521  522  523  530  532  535  536  538  540  545  549  555 
##   no   no   no   no   no  yes   no   no   no  yes   no   no   no   no   no   no 
##  560  563  565  574  578  581  586  587  588  590  593  598  600  604  607  608 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  615  616  619  621  629  631  633  635  636  643  648  652  653  659  660  664 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
##  667  678  682  685  689  691  695  696  698  700  702  704  711  715  716  717 
##   no   no   no   no   no   no  yes   no   no   no   no   no   no   no  yes   no 
##  721  722  723  730  733  734  752  755  757  759  760  761  762  767  768  772 
##   no  yes   no   no  yes   no   no   no   no   no   no   no   no  yes   no  yes 
##  775  778  781  784  785  790  794  805  815  816  818  832  834  837  840  844 
##   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
##  846  848  850  852  855  857  861  862  865  866  867  868  872  873  875  876 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no  yes   no 
##  878  879  880  882  884  885  887  890  891  892  897  900  904  912  916  917 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
##  918  919  922  924  925  927  929  933  936  939  940  942  949  957  962  971 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  976  981  999 1000 1001 1003 1006 1007 1010 1018 1020 1021 1022 1026 1036 1038 
##  yes   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no 
## 1040 1047 1051 1060 1061 1062 1064 1067 1070 1075 1080 1082 1089 1090 1091 1092 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1094 1096 1097 1101 1102 1107 1110 1113 1115 1116 1120 1129 1132 1139 1140 1149 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1156 1158 1161 1163 1167 1171 1172 1178 1180 1181 1197 1204 1205 1212 1213 1215 
##  yes   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 1217 1220 1224 1231 1234 1237 1245 1247 1248 1256 1257 1258 1261 1268 1271 1274 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
## 1277 1281 1285 1291 1297 1300 1302 1307 1308 1310 1321 1322 1323 1325 1328 1331 
##   no   no   no   no   no  yes   no   no   no   no   no   no  yes   no   no   no 
## 1334 1338 1339 1342 1344 1346 1347 1351 1355 1356 1362 1364 1366 1367 1374 1379 
##   no  yes   no   no   no  yes  yes  yes   no   no   no   no   no   no  yes   no 
## 1381 1384 1390 1396 1400 1402 1409 1417 1418 1429 1432 1435 1436 1438 1441 1446 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 1447 1451 1452 1455 1459 1464 1466 1467 1469 1470 1474 1475 1477 1482 1483 1490 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1491 1503 1505 1507 1514 1519 1522 1524 1529 1530 1531 1533 1536 1537 1539 1541 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no 
## 1547 1548 1550 1551 1552 1553 1554 1556 1558 1560 1561 1565 1570 1576 1584 1585 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1587 1589 1592 1596 1600 1604 1605 1613 1615 1617 1621 1624 1626 1627 1628 1630 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 1634 1641 1647 1649 1651 1653 1657 1661 1662 1664 1667 1671 1673 1675 1680 1690 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes  yes   no 
## 1691 1692 1693 1695 1696 1702 1706 1711 1717 1718 1719 1721 1722 1723 1726 1733 
##   no  yes   no  yes   no  yes   no   no   no   no   no   no   no   no   no   no 
## 1734 1739 1742 1743 1745 1746 1749 1757 1759 1763 1766 1773 1777 1782 1785 1787 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no  yes   no 
## 1792 1794 1795 1797 1800 1804 1808 1810 1821 1826 1827 1828 1831 1838 1841 1842 
##   no   no  yes   no   no   no   no   no   no   no   no   no  yes  yes   no   no 
## 1843 1845 1846 1849 1857 1858 1867 1868 1869 1873 1876 1880 1882 1883 1884 1886 
##  yes  yes  yes   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 1892 1898 1899 1900 1905 1909 1910 1911 1917 1927 1929 1931 1932 1936 1945 1950 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 1951 1965 1967 1968 1969 1970 1974 1977 1981 1984 1985 1986 1989 1990 1993 1994 
##  yes   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 2004 2006 2011 2020 2022 2023 2028 2033 2034 2035 2038 2039 2041 2044 2045 2046 
##   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 2052 2056 2066 2069 2070 2073 2077 2079 2089 2093 2094 2095 2101 2104 2105 2107 
##   no   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no  yes 
## 2110 2112 2118 2123 2124 2125 2129 2136 2138 2139 2140 2142 2151 2156 2157 2159 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no  yes 
## 2160 2162 2164 2165 2167 2168 2170 2172 2173 2178 2179 2182 2183 2188 2192 2201 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no 
## 2206 2208 2209 2229 2235 2237 2239 2245 2250 2251 2257 2262 2268 2269 2270 2275 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 2280 2283 2285 2289 2296 2298 2301 2302 2304 2306 2308 2311 2312 2313 2317 2318 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2320 2328 2329 2330 2333 2334 2336 2339 2341 2345 2348 2350 2353 2355 2359 2362 
##   no  yes   no   no   no   no  yes   no   no   no  yes   no   no  yes   no   no 
## 2365 2369 2374 2377 2379 2383 2385 2386 2389 2392 2395 2403 2404 2408 2411 2419 
##   no   no   no  yes   no   no   no   no  yes   no   no  yes   no  yes   no   no 
## 2427 2429 2432 2437 2446 2447 2457 2460 2466 2468 2469 2475 2478 2481 2482 2483 
##   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 2486 2488 2490 2491 2494 2496 2498 2499 2504 2505 2510 2512 2520 2521 2522 2527 
##   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes 
## 2529 2534 2546 2547 2550 2551 2554 2558 2569 2573 2576 2582 2585 2586 2589 2593 
##   no   no   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no 
## 2597 2602 2618 2620 2622 2624 2625 2626 2633 2641 2642 2643 2646 2647 2650 2654 
##   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no 
## 2657 2659 2661 2669 2671 2677 2679 2685 2690 2691 2694 2698 2701 2702 2703 2704 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2706 2709 2712 2714 2719 2721 2727 2730 2735 2740 2741 2750 2753 2754 2755 2756 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2758 2763 2764 2765 2766 2767 2768 2771 2772 2773 2775 2788 2789 2790 2793 2795 
##   no   no   no   no   no   no   no   no   no  yes  yes   no  yes   no   no   no 
## 2800 2808 2810 2811 2812 2813 2820 2825 2827 2829 2830 2836 2841 2844 2851 2853 
##   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no 
## 2856 2861 2864 2867 2871 2874 2877 2883 2884 2886 2888 2898 2903 2914 2919 2921 
##   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no 
## 2922 2932 2938 2940 2942 2943 2945 2948 2952 2965 2971 2973 2975 2977 2982 2985 
##   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no   no   no 
## 2988 2989 2995 2996 2997 2999 3005 3006 3008 3011 3012 3020 3025 3027 3028 3029 
##  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3032 3035 3036 3047 3055 3059 3062 3068 3071 3073 3077 3078 3079 3085 3094 3096 
##   no   no  yes   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 3101 3105 3108 3112 3114 3115 3116 3120 3121 3122 3128 3131 3134 3151 3152 3161 
##   no   no   no   no  yes   no   no   no   no   no  yes   no   no   no   no   no 
## 3167 3169 3170 3171 3176 3177 3181 3182 3186 3191 3194 3195 3199 3201 3208 3209 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3210 3213 3221 3229 3232 3239 3243 3246 3247 3248 3249 3250 3253 3254 3256 3257 
##  yes   no   no   no   no  yes   no   no  yes  yes   no   no   no   no   no   no 
## 3260 3262 3264 3270 3275 3276 3285 3287 3288 3289 3292 3293 3295 3297 3302 3303 
##   no   no   no   no   no   no   no   no  yes   no  yes   no   no   no  yes   no 
## 3305 3307 3311 3312 3316 3317 3321 3322 3328 3329 3330 3336 3337 3338 3342 3343 
##   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no 
## 3347 3348 3349 3351 3356 3362 3374 3376 3379 3381 3387 3389 3396 3399 3402 3405 
##   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no   no   no 
## 3416 3418 3420 3430 3431 3437 3440 3441 3443 3444 3450 3451 3454 3460 3464 3465 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 3466 3467 3469 3473 3474 3476 3489 3491 3494 3495 3498 3499 3500 3503 3513 3514 
##   no   no   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no 
## 3518 3523 3524 3525 3531 3532 3536 3539 3540 3543 3545 3549 3552 3554 3557 3571 
##   no   no   no   no  yes   no   no   no   no   no   no  yes   no   no   no   no 
## 3574 3584 3586 3587 3590 3602 3607 3610 3612 3616 3617 3620 3626 3627 3628 3631 
##   no   no  yes   no   no   no   no  yes   no   no  yes   no   no   no   no  yes 
## 3633 3635 3636 3637 3644 3647 3649 3651 3654 3657 3658 3659 3664 3669 3672 3677 
##   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 3679 3682 3684 3686 3687 3688 3696 3699 3704 3708 3713 3718 3722 3728 3729 3730 
##   no   no   no   no  yes   no   no   no   no   no   no  yes   no   no   no   no 
## 3733 3737 3740 3743 3746 3754 3758 3761 3762 3769 3770 3776 3780 3785 3786 3790 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3793 3794 3796 3797 3798 3802 3809 3810 3815 3816 3819 3820 3821 3826 3831 3836 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3841 3845 3846 3851 3852 3853 3854 3855 3858 3863 3864 3866 3872 3875 3877 3879 
##   no   no   no   no  yes  yes   no  yes   no   no   no   no   no   no   no   no 
## 3882 3886 3895 3898 3906 3907 3909 3914 3915 3916 3918 3921 3923 3931 3933 3934 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 3937 3946 3948 3950 3954 3960 3963 3964 3967 3969 3970 3971 3975 3986 3987 3990 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no 
## 3991 3992 3993 3995 3996 3997 4002 4006 4013 4017 4021 4022 4024 4026 4030 4035 
##   no   no   no   no   no   no   no   no   no   no   no  yes  yes   no   no   no 
## 4036 4037 4045 4048 4049 4056 4059 4061 4065 4070 4071 4072 4074 4084 4089 4090 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4091 4094 4097 4099 4101 4118 4119 4121 4124 4129 4130 4134 4137 4142 4144 4145 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4146 4148 4151 4158 4162 4167 4168 4170 4172 4185 4190 4213 4218 4224 4225 4227 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 4230 4233 4239 4241 4242 4248 4251 4261 4262 4269 4272 4273 4278 4281 4292 4295 
##  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 4299 4303 4307 4308 4313 4316 4321 4322 4324 4330 4335 4338 4339 4340 4343 4344 
##   no   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no   no 
## 4347 4358 4360 4362 4363 4365 4367 4372 4373 4374 4381 4384 4386 4387 4388 4398 
##   no   no   no   no   no   no  yes  yes   no   no   no  yes   no  yes   no   no 
## 4399 4400 4410 4412 4417 4430 4433 4437 4447 4450 4451 4462 4464 4466 4470 4473 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no  yes   no   no 
## 4474 4478 4480 4482 4485 4494 4498 4503 4504 4508 4516 4524 4527 4528 4529 4530 
##   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no 
## 4532 4537 4545 4551 4552 4556 4557 4567 4570 4579 4581 4583 4586 4587 4589 4591 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4596 4606 4607 4610 4613 4615 4617 4621 4622 4623 4624 4631 4633 4640 4642 4643 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4644 4645 4647 4649 4650 4652 4654 4657 4658 4659 4660 4664 4675 4676 4678 4680 
##  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 4681 4684 4686 4687 4689 4690 4696 4702 4703 4704 4710 4711 4715 4716 4718 4725 
##   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 4727 4729 4734 4738 4740 4743 4746 4748 4753 4754 4757 4761 4762 4763 4771 4778 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no 
## 4780 4784 4788 4789 4791 4793 4794 4798 4799 4801 4803 4807 4810 4811 4815 4816 
##   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no 
## 4818 4819 4824 4826 4828 4829 4838 4840 4845 4851 4853 4854 4855 4860 4862 4865 
##  yes   no   no  yes   no   no  yes   no   no   no   no   no   no   no  yes   no 
## 4868 4869 4875 4878 4880 4883 4884 4886 4896 4900 4904 4909 4912 4914 4915 4931 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no 
## 4933 4935 4938 4939 4940 4946 4950 4953 4956 4958 4959 4964 4967 4970 4972 4973 
##   no   no  yes   no  yes   no   no   no   no   no   no   no   no   no   no   no 
## 4975 4977 4978 4980 4981 4982 4983 4984 4985 4993 4995 5000 
##   no   no   no   no   no   no   no   no   no   no   no   no 
## Levels: no yes</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="决策树及其组合方法.html#cb22-1" aria-hidden="true" tabindex="-1"></a>pred1<span class="ot">&lt;-</span> <span class="fu">data.frame</span>(pred)</span>
<span id="cb22-2"><a href="决策树及其组合方法.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#View(pred1)</span></span>
<span id="cb22-3"><a href="决策树及其组合方法.html#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="决策树及其组合方法.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Confusion matrix is a technique for summarizing the performance of a classification algorithm </span></span>
<span id="cb22-5"><a href="决策树及其组合方法.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(testData<span class="sc">$</span>churn ,pred)<span class="co">#create confusion matrix to see how mnay cus are correctly predicted and incorrectly predicted</span></span></code></pre></div>
<pre><code>##      pred
##         no  yes
##   no  1269   19
##   yes   66  146</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="决策树及其组合方法.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb24-2"><a href="决策树及其组合方法.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="do">#####RANDOM FOREST MODEL</span></span>
<span id="cb24-3"><a href="决策树及其组合方法.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="do">#####</span></span>
<span id="cb24-4"><a href="决策树及其组合方法.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="决策树及其组合方法.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="决策树及其组合方法.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span></code></pre></div>
<pre><code>## randomForest 4.7-1.1</code></pre>
<pre><code>## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre><code>## 
## Attaching package: &#39;randomForest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:rattle&#39;:
## 
##     importance</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="决策树及其组合方法.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#to build the random forest model </span></span>
<span id="cb29-2"><a href="决策树及其组合方法.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">#trainData$churn = as.character(trainData$churn)</span></span>
<span id="cb29-3"><a href="决策树及其组合方法.html#cb29-3" aria-hidden="true" tabindex="-1"></a>random_model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(churn<span class="sc">~</span>.,<span class="at">data=</span>trainData, <span class="at">importance =</span> T)</span>
<span id="cb29-4"><a href="决策树及其组合方法.html#cb29-4" aria-hidden="true" tabindex="-1"></a>random_model</span></code></pre></div>
<pre><code>## 
## Call:
##  randomForest(formula = churn ~ ., data = trainData, importance = T) 
##                Type of random forest: classification
##                      Number of trees: 500
## No. of variables tried at each split: 4
## 
##         OOB estimate of  error rate: 4.2%
## Confusion matrix:
##       no yes class.error
## no  2979  26 0.008652246
## yes  121 374 0.244444444</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="决策树及其组合方法.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#predicting the data based on the model developed</span></span>
<span id="cb31-2"><a href="决策树及其组合方法.html#cb31-2" aria-hidden="true" tabindex="-1"></a>ran_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(random_model,testData)</span>
<span id="cb31-3"><a href="决策树及其组合方法.html#cb31-3" aria-hidden="true" tabindex="-1"></a>ran_pred</span></code></pre></div>
<pre><code>##    4    5    6    7   10   13   15   16   17   23   27   31   32   35   36   37 
##  yes   no   no   no   no   no  yes  yes   no   no   no   no   no   no   no   no 
##   41   46   48   49   50   58   59   60   62   64   66   68   69   78   80   81 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no  yes   no   no 
##   82   86   93   95  101  113  120  121  122  133  137  141  144  145  147  150 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no  yes   no   no 
##  168  175  176  177  184  188  195  196  197  198  206  211  213  214  215  223 
##   no   no   no   no   no   no   no   no   no  yes   no   no   no   no  yes   no 
##  228  229  230  232  238  240  248  249  250  254  258  260  261  262  263  264 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  265  266  270  271  272  276  279  283  290  293  295  296  298  304  311  313 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no 
##  314  315  316  319  320  324  325  327  328  330  331  337  339  343  344  354 
##   no   no   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no 
##  356  357  358  368  370  373  374  376  378  380  381  387  394  395  396  402 
##   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no 
##  405  406  407  409  410  416  417  418  419  421  423  432  440  441  442  449 
##   no   no   no   no   no  yes  yes   no   no   no   no   no   no   no   no   no 
##  452  453  455  460  464  468  471  474  479  481  486  494  500  504  508  509 
##   no   no  yes   no   no   no   no  yes   no   no   no   no   no   no   no   no 
##  512  513  515  518  521  522  523  530  532  535  536  538  540  545  549  555 
##   no   no  yes   no   no  yes   no   no   no  yes   no   no   no   no   no   no 
##  560  563  565  574  578  581  586  587  588  590  593  598  600  604  607  608 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  615  616  619  621  629  631  633  635  636  643  648  652  653  659  660  664 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
##  667  678  682  685  689  691  695  696  698  700  702  704  711  715  716  717 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no 
##  721  722  723  730  733  734  752  755  757  759  760  761  762  767  768  772 
##   no  yes   no   no  yes   no   no   no   no   no   no   no   no  yes   no  yes 
##  775  778  781  784  785  790  794  805  815  816  818  832  834  837  840  844 
##   no   no  yes   no   no   no   no   no   no  yes   no   no   no   no   no   no 
##  846  848  850  852  855  857  861  862  865  866  867  868  872  873  875  876 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no  yes   no 
##  878  879  880  882  884  885  887  890  891  892  897  900  904  912  916  917 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
##  918  919  922  924  925  927  929  933  936  939  940  942  949  957  962  971 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
##  976  981  999 1000 1001 1003 1006 1007 1010 1018 1020 1021 1022 1026 1036 1038 
##  yes   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no 
## 1040 1047 1051 1060 1061 1062 1064 1067 1070 1075 1080 1082 1089 1090 1091 1092 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1094 1096 1097 1101 1102 1107 1110 1113 1115 1116 1120 1129 1132 1139 1140 1149 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1156 1158 1161 1163 1167 1171 1172 1178 1180 1181 1197 1204 1205 1212 1213 1215 
##  yes   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 1217 1220 1224 1231 1234 1237 1245 1247 1248 1256 1257 1258 1261 1268 1271 1274 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no  yes 
## 1277 1281 1285 1291 1297 1300 1302 1307 1308 1310 1321 1322 1323 1325 1328 1331 
##  yes   no  yes   no   no  yes   no   no   no   no   no   no  yes   no   no   no 
## 1334 1338 1339 1342 1344 1346 1347 1351 1355 1356 1362 1364 1366 1367 1374 1379 
##   no  yes   no   no   no  yes  yes  yes   no   no   no   no   no   no  yes   no 
## 1381 1384 1390 1396 1400 1402 1409 1417 1418 1429 1432 1435 1436 1438 1441 1446 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no 
## 1447 1451 1452 1455 1459 1464 1466 1467 1469 1470 1474 1475 1477 1482 1483 1490 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 1491 1503 1505 1507 1514 1519 1522 1524 1529 1530 1531 1533 1536 1537 1539 1541 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no  yes   no 
## 1547 1548 1550 1551 1552 1553 1554 1556 1558 1560 1561 1565 1570 1576 1584 1585 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 1587 1589 1592 1596 1600 1604 1605 1613 1615 1617 1621 1624 1626 1627 1628 1630 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 1634 1641 1647 1649 1651 1653 1657 1661 1662 1664 1667 1671 1673 1675 1680 1690 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes  yes   no 
## 1691 1692 1693 1695 1696 1702 1706 1711 1717 1718 1719 1721 1722 1723 1726 1733 
##   no  yes  yes  yes   no  yes   no   no   no   no   no   no   no   no   no   no 
## 1734 1739 1742 1743 1745 1746 1749 1757 1759 1763 1766 1773 1777 1782 1785 1787 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no  yes   no 
## 1792 1794 1795 1797 1800 1804 1808 1810 1821 1826 1827 1828 1831 1838 1841 1842 
##   no   no  yes   no   no   no   no   no   no   no   no   no  yes  yes   no   no 
## 1843 1845 1846 1849 1857 1858 1867 1868 1869 1873 1876 1880 1882 1883 1884 1886 
##  yes  yes  yes   no   no  yes   no   no   no   no   no   no  yes   no   no   no 
## 1892 1898 1899 1900 1905 1909 1910 1911 1917 1927 1929 1931 1932 1936 1945 1950 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 1951 1965 1967 1968 1969 1970 1974 1977 1981 1984 1985 1986 1989 1990 1993 1994 
##  yes   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 2004 2006 2011 2020 2022 2023 2028 2033 2034 2035 2038 2039 2041 2044 2045 2046 
##   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 2052 2056 2066 2069 2070 2073 2077 2079 2089 2093 2094 2095 2101 2104 2105 2107 
##  yes   no   no   no  yes   no  yes   no   no   no   no   no   no  yes   no  yes 
## 2110 2112 2118 2123 2124 2125 2129 2136 2138 2139 2140 2142 2151 2156 2157 2159 
##   no   no   no   no   no   no   no   no   no   no   no   no  yes  yes   no  yes 
## 2160 2162 2164 2165 2167 2168 2170 2172 2173 2178 2179 2182 2183 2188 2192 2201 
##   no   no  yes  yes   no   no   no   no   no   no   no   no   no   no   no   no 
## 2206 2208 2209 2229 2235 2237 2239 2245 2250 2251 2257 2262 2268 2269 2270 2275 
##   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no   no   no 
## 2280 2283 2285 2289 2296 2298 2301 2302 2304 2306 2308 2311 2312 2313 2317 2318 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2320 2328 2329 2330 2333 2334 2336 2339 2341 2345 2348 2350 2353 2355 2359 2362 
##   no  yes   no   no   no   no  yes   no   no   no  yes   no   no  yes   no   no 
## 2365 2369 2374 2377 2379 2383 2385 2386 2389 2392 2395 2403 2404 2408 2411 2419 
##   no   no   no  yes   no   no   no   no  yes   no   no  yes   no  yes   no   no 
## 2427 2429 2432 2437 2446 2447 2457 2460 2466 2468 2469 2475 2478 2481 2482 2483 
##   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 2486 2488 2490 2491 2494 2496 2498 2499 2504 2505 2510 2512 2520 2521 2522 2527 
##   no   no   no   no  yes   no   no   no   no   no   no   no   no   no   no  yes 
## 2529 2534 2546 2547 2550 2551 2554 2558 2569 2573 2576 2582 2585 2586 2589 2593 
##   no   no   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no 
## 2597 2602 2618 2620 2622 2624 2625 2626 2633 2641 2642 2643 2646 2647 2650 2654 
##   no   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no 
## 2657 2659 2661 2669 2671 2677 2679 2685 2690 2691 2694 2698 2701 2702 2703 2704 
##   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2706 2709 2712 2714 2719 2721 2727 2730 2735 2740 2741 2750 2753 2754 2755 2756 
##   no  yes   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 2758 2763 2764 2765 2766 2767 2768 2771 2772 2773 2775 2788 2789 2790 2793 2795 
##   no   no   no   no   no   no   no   no   no  yes  yes   no   no   no   no   no 
## 2800 2808 2810 2811 2812 2813 2820 2825 2827 2829 2830 2836 2841 2844 2851 2853 
##   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no 
## 2856 2861 2864 2867 2871 2874 2877 2883 2884 2886 2888 2898 2903 2914 2919 2921 
##   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no   no 
## 2922 2932 2938 2940 2942 2943 2945 2948 2952 2965 2971 2973 2975 2977 2982 2985 
##   no   no   no   no   no  yes   no  yes   no  yes   no   no   no   no   no   no 
## 2988 2989 2995 2996 2997 2999 3005 3006 3008 3011 3012 3020 3025 3027 3028 3029 
##  yes   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 3032 3035 3036 3047 3055 3059 3062 3068 3071 3073 3077 3078 3079 3085 3094 3096 
##   no   no  yes   no   no   no   no   no   no  yes   no   no   no   no  yes   no 
## 3101 3105 3108 3112 3114 3115 3116 3120 3121 3122 3128 3131 3134 3151 3152 3161 
##   no   no   no   no  yes   no   no   no   no   no  yes   no   no   no   no   no 
## 3167 3169 3170 3171 3176 3177 3181 3182 3186 3191 3194 3195 3199 3201 3208 3209 
##  yes  yes  yes   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 3210 3213 3221 3229 3232 3239 3243 3246 3247 3248 3249 3250 3253 3254 3256 3257 
##  yes   no   no   no   no  yes   no   no  yes  yes   no   no   no   no  yes  yes 
## 3260 3262 3264 3270 3275 3276 3285 3287 3288 3289 3292 3293 3295 3297 3302 3303 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no  yes   no 
## 3305 3307 3311 3312 3316 3317 3321 3322 3328 3329 3330 3336 3337 3338 3342 3343 
##  yes   no   no   no   no   no  yes   no   no   no   no   no   no   no   no   no 
## 3347 3348 3349 3351 3356 3362 3374 3376 3379 3381 3387 3389 3396 3399 3402 3405 
##   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no   no   no 
## 3416 3418 3420 3430 3431 3437 3440 3441 3443 3444 3450 3451 3454 3460 3464 3465 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 3466 3467 3469 3473 3474 3476 3489 3491 3494 3495 3498 3499 3500 3503 3513 3514 
##   no   no  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 3518 3523 3524 3525 3531 3532 3536 3539 3540 3543 3545 3549 3552 3554 3557 3571 
##   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 3574 3584 3586 3587 3590 3602 3607 3610 3612 3616 3617 3620 3626 3627 3628 3631 
##   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no   no  yes 
## 3633 3635 3636 3637 3644 3647 3649 3651 3654 3657 3658 3659 3664 3669 3672 3677 
##   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 3679 3682 3684 3686 3687 3688 3696 3699 3704 3708 3713 3718 3722 3728 3729 3730 
##   no  yes   no   no  yes   no   no   no   no   no   no  yes   no   no   no   no 
## 3733 3737 3740 3743 3746 3754 3758 3761 3762 3769 3770 3776 3780 3785 3786 3790 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3793 3794 3796 3797 3798 3802 3809 3810 3815 3816 3819 3820 3821 3826 3831 3836 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 3841 3845 3846 3851 3852 3853 3854 3855 3858 3863 3864 3866 3872 3875 3877 3879 
##   no   no   no   no  yes   no   no  yes   no   no   no   no   no   no   no   no 
## 3882 3886 3895 3898 3906 3907 3909 3914 3915 3916 3918 3921 3923 3931 3933 3934 
##   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no   no 
## 3937 3946 3948 3950 3954 3960 3963 3964 3967 3969 3970 3971 3975 3986 3987 3990 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no 
## 3991 3992 3993 3995 3996 3997 4002 4006 4013 4017 4021 4022 4024 4026 4030 4035 
##   no   no   no   no   no   no   no   no   no   no   no  yes  yes   no   no   no 
## 4036 4037 4045 4048 4049 4056 4059 4061 4065 4070 4071 4072 4074 4084 4089 4090 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4091 4094 4097 4099 4101 4118 4119 4121 4124 4129 4130 4134 4137 4142 4144 4145 
##   no   no   no   no   no   no   no   no   no   no   no   no   no  yes   no   no 
## 4146 4148 4151 4158 4162 4167 4168 4170 4172 4185 4190 4213 4218 4224 4225 4227 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no   no 
## 4230 4233 4239 4241 4242 4248 4251 4261 4262 4269 4272 4273 4278 4281 4292 4295 
##  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 4299 4303 4307 4308 4313 4316 4321 4322 4324 4330 4335 4338 4339 4340 4343 4344 
##   no   no   no  yes   no   no   no   no   no   no   no  yes   no   no   no   no 
## 4347 4358 4360 4362 4363 4365 4367 4372 4373 4374 4381 4384 4386 4387 4388 4398 
##   no   no   no   no   no   no  yes  yes   no   no   no  yes   no  yes   no   no 
## 4399 4400 4410 4412 4417 4430 4433 4437 4447 4450 4451 4462 4464 4466 4470 4473 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no  yes   no   no 
## 4474 4478 4480 4482 4485 4494 4498 4503 4504 4508 4516 4524 4527 4528 4529 4530 
##   no   no   no   no   no   no   no  yes   no  yes   no   no   no   no   no   no 
## 4532 4537 4545 4551 4552 4556 4557 4567 4570 4579 4581 4583 4586 4587 4589 4591 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4596 4606 4607 4610 4613 4615 4617 4621 4622 4623 4624 4631 4633 4640 4642 4643 
##   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no   no 
## 4644 4645 4647 4649 4650 4652 4654 4657 4658 4659 4660 4664 4675 4676 4678 4680 
##  yes   no   no   no   no   no   no   no   no  yes   no   no   no   no   no   no 
## 4681 4684 4686 4687 4689 4690 4696 4702 4703 4704 4710 4711 4715 4716 4718 4725 
##   no   no   no   no   no   no   no   no   no   no   no  yes   no   no   no   no 
## 4727 4729 4734 4738 4740 4743 4746 4748 4753 4754 4757 4761 4762 4763 4771 4778 
##   no   no   no  yes   no   no   no   no   no   no   no   no   no   no   no   no 
## 4780 4784 4788 4789 4791 4793 4794 4798 4799 4801 4803 4807 4810 4811 4815 4816 
##   no   no   no  yes   no   no   no   no  yes   no   no   no  yes   no   no   no 
## 4818 4819 4824 4826 4828 4829 4838 4840 4845 4851 4853 4854 4855 4860 4862 4865 
##   no   no   no  yes   no   no  yes   no   no   no   no   no   no   no  yes   no 
## 4868 4869 4875 4878 4880 4883 4884 4886 4896 4900 4904 4909 4912 4914 4915 4931 
##   no   no   no   no   no   no   no   no  yes   no   no   no   no   no  yes   no 
## 4933 4935 4938 4939 4940 4946 4950 4953 4956 4958 4959 4964 4967 4970 4972 4973 
##   no   no  yes   no  yes   no   no   no   no   no   no   no   no   no   no   no 
## 4975 4977 4978 4980 4981 4982 4983 4984 4985 4993 4995 5000 
##   no   no   no   no   no   no   no   no   no   no   no   no 
## Levels: no yes</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="决策树及其组合方法.html#cb33-1" aria-hidden="true" tabindex="-1"></a>ran_pred1 <span class="ot">&lt;-</span><span class="fu">data.frame</span>(ran_pred)</span>
<span id="cb33-2"><a href="决策树及其组合方法.html#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="决策树及其组合方法.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(testData<span class="sc">$</span>churn ,ran_pred) <span class="co"># confusion matrix</span></span></code></pre></div>
<pre><code>##      ran_pred
##         no  yes
##   no  1272   16
##   yes   46  166</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="决策树及其组合方法.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#accuracy rate </span></span>
<span id="cb35-2"><a href="决策树及其组合方法.html#cb35-2" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1276</span><span class="sc">+</span> <span class="dv">173</span>)<span class="sc">/</span>(<span class="dv">1276</span><span class="sc">+</span><span class="dv">12</span><span class="sc">+</span><span class="dv">39</span><span class="sc">+</span><span class="dv">173</span>) <span class="co"># 97 % of accuracy : higher than decision tree , where accuracy rate is 95 % </span></span></code></pre></div>
<pre><code>## [1] 0.966</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="决策树及其组合方法.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#most commonly mean decrease gini is considered</span></span>
<span id="cb37-2"><a href="决策树及其组合方法.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">importance</span>(random_model)</span></code></pre></div>
<pre><code>##                                       no        yes MeanDecreaseAccuracy
## international_plan            66.3001649 77.3105969           82.4148999
## voice_mail_plan               21.7731970 24.9161134           25.9296837
## number_vmail_messages         17.1042677 22.5664368           21.9432032
## total_day_minutes             32.8759771 34.0522749           40.9207612
## total_day_calls                0.1623616 -2.1991648           -0.8583942
## total_day_charge              33.7253852 33.7382963           42.3306161
## total_eve_minutes             24.7194284 22.7867202           28.0451913
## total_eve_calls               -2.4398857 -1.7131349           -2.9654945
## total_eve_charge              25.2363806 24.4041040           29.4101796
## total_night_minutes           17.0926745  5.4936140           18.1580906
## total_night_calls              1.1420561  0.3104906            1.1820237
## total_night_charge            17.5457676  6.4127554           18.8664032
## total_intl_minutes            24.0265470 18.0833553           27.1668913
## total_intl_calls              34.3628312 43.4082896           46.2131373
## total_intl_charge             23.9258523 18.6266636           27.9782043
## number_customer_service_calls 75.6759709 98.3635775          101.0913362
##                               MeanDecreaseGini
## international_plan                    63.12195
## voice_mail_plan                       19.87769
## number_vmail_messages                 23.97956
## total_day_minutes                    128.19849
## total_day_calls                       25.25645
## total_day_charge                     120.64090
## total_eve_minutes                     56.72212
## total_eve_calls                       23.95725
## total_eve_charge                      60.05696
## total_night_minutes                   35.16897
## total_night_calls                     27.07429
## total_night_charge                    35.66622
## total_intl_minutes                    37.49443
## total_intl_calls                      47.31136
## total_intl_charge                     37.96676
## number_customer_service_calls        105.45453</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="决策树及其组合方法.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables that result in nodes with higher purity have a higher decrease in Gini coefficient.</span></span>
<span id="cb39-2"><a href="决策树及其组合方法.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">varImpPlot</span>(random_model)</span></code></pre></div>
<p><img src="07-decisiontree_files/figure-html/project-2.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="决策树及其组合方法.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#total day charges have higher decrease in gini index so its more significant than other</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="logistic回归.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="github使用.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-decisiontree.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
